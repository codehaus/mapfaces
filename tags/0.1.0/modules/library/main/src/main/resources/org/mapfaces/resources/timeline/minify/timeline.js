
var Timeline=new Object();Timeline.Platform=new Object();(function(){var M=true;var J=["timeline.js","util/platform.js","util/debug.js","util/xmlhttp.js","util/dom.js","util/graphics.js","util/date-time.js","util/data-structure.js","util/html.js","units.js","themes.js","ethers.js","ether-painters.js","labellers.js","sources.js","layouts.js","painters.js","decorators.js"];var F=["timeline.css","ethers.css","events.css"];var H=["timeline.js","labellers.js"];var O=[];var L=["cs","de","en","es","fr","it","ru","se","vi","zh"];try{var C=["en"];var B="en";var D=function(W){var Z=W.split("&");for(var X=0;X<Z.length;X++){var Y=Z[X].split("=");if(Y[0]=="locales"){C=C.concat(Y[1].split(","))}else{if(Y[0]=="defaultLocale"){B=Y[1]}else{if(Y[0]=="bundle"){M=Y[1]!="false"}}}}};(function(){if(typeof Timeline_urlPrefix=="string"){Timeline.urlPrefix=Timeline_urlPrefix;if(typeof Timeline_parameters=="string"){D(Timeline_parameters)}}else{}})();var A;var V;if("SimileAjax" in window){A=function(W,X){f;SimileAjax.includeJavascriptFiles(document,W,X)};V=function(W,X){SimileAjax.includeCssFiles(document,W,X)}}else{var S=function(){return document.getElementsByTagName("head")[0]};var U=function(X){if(document.body==null){try{return }catch(Y){}}var W=document.createElement("script");W.type="text/javascript";W.language="JavaScript";W.src=X};var R=function(W){if(document.body==null){try{document.write("<link rel='stylesheet' href='"+W+"' type='text/css'/>");return }catch(Y){}}var X=document.createElement("link");X.setAttribute("rel","stylesheet");X.setAttribute("type","text/css");X.setAttribute("href",W);S().appendChild(X)};A=function(W,X){};V=function(W,Y){for(var X=0;X<Y.length;X++){R(W+Y[X])}}}if(M){A(Timeline.urlPrefix,["bundle.js"]);V(Timeline.urlPrefix,["bundle.css"])}else{A(Timeline.urlPrefix+"scripts/",J);V(Timeline.urlPrefix+"styles/",F)}var I=[];I[B]=true;var G=function(W){for(var X=0;X<L.length;X++){if(W==L[X]){I[W]=true;return true}}return false};var N=function(W){if(G(W)){return W}var X=W.indexOf("-");if(X>0&&G(W.substr(0,X))){return W.substr(0,X)}return null};for(var P=0;P<C.length;P++){N(C[P])}var E=B;var K=("language" in navigator?navigator.language:navigator.browserLanguage).split(";");for(var P=0;P<K.length;P++){var Q=N(K[P]);if(Q!=null){E=Q;break}}for(var P=0;P<L.length;P++){var Q=L[P];if(I[Q]){A(Timeline.urlPrefix+"scripts/l10n/"+Q+"/",H);V(Timeline.urlPrefix+"styles/l10n/"+Q+"/",O)}}Timeline.Platform.serverLocale=B;Timeline.Platform.clientLocale=E}catch(T){alert(T)}})();if(!Timeline.strings){Timeline.strings=new Object()}Timeline.create=function(C,B,A,D){return new Timeline._Impl(C,B,A,D)};Timeline.HORIZONTAL=0;Timeline.VERTICAL=1;Timeline._defaultTheme=null;Timeline.createBandInfo=function(H){var G=("theme" in H)?H.theme:Timeline.getDefaultTheme();var F=("eventSource" in H)?H.eventSource:null;var E=new Timeline.LinearEther({centersOn:("date" in H)?H.date:new Date(),interval:Timeline.DateTime.gregorianUnitLengths[H.intervalUnit],pixelsPerInterval:H.intervalPixels});var C=new Timeline.GregorianEtherPainter({unit:H.intervalUnit,multiple:("multiple" in H)?H.multiple:1,theme:G,align:("align" in H)?H.align:undefined});var D=new Timeline.StaticTrackBasedLayout({eventSource:F,ether:E,showText:("showEventText" in H)?H.showEventText:true,theme:G});var A={showText:("showEventText" in H)?H.showEventText:true,layout:D,theme:G};if("trackHeight" in H){A.trackHeight=H.trackHeight}if("trackGap" in H){A.trackGap=H.trackGap}var B=new Timeline.DurationEventPainter(A);return{width:H.width,eventSource:F,timeZone:("timeZone" in H)?H.timeZone:0,ether:E,etherPainter:C,eventPainter:B}};Timeline.createHotZoneBandInfo=function(H){var G=("theme" in H)?H.theme:Timeline.getDefaultTheme();var F=("eventSource" in H)?H.eventSource:null;var E=new Timeline.HotZoneEther({centersOn:("date" in H)?H.date:new Date(),interval:Timeline.DateTime.gregorianUnitLengths[H.intervalUnit],pixelsPerInterval:H.intervalPixels,zones:H.zones});var C=new Timeline.HotZoneGregorianEtherPainter({unit:H.intervalUnit,zones:H.zones,theme:G,align:("align" in H)?H.align:undefined});var D=new Timeline.StaticTrackBasedLayout({eventSource:F,ether:E,theme:G});var A={showText:("showEventText" in H)?H.showEventText:true,layout:D,theme:G};if("trackHeight" in H){A.trackHeight=H.trackHeight}if("trackGap" in H){A.trackGap=H.trackGap}var B=new Timeline.DurationEventPainter(A);return{width:H.width,eventSource:F,timeZone:("timeZone" in H)?H.timeZone:0,ether:E,etherPainter:C,eventPainter:B}};Timeline.getDefaultTheme=function(){if(Timeline._defaultTheme==null){Timeline._defaultTheme=Timeline.ClassicTheme.create(Timeline.Platform.getDefaultLocale())}return Timeline._defaultTheme};Timeline.setDefaultTheme=function(A){Timeline._defaultTheme=A};Timeline.loadXML=function(A,C){var D=function(G,E,F){alert("Failed to load data xml from "+A+"\n"+G)};var B=function(F){var E=F.responseXML;if(!E.documentElement&&F.responseStream){E.load(F.responseStream)}C(E,A)};Timeline.XmlHttp.get(A,D,B)};Timeline.loadJSON=function(url,f){var fError=function(statusText,status,xmlhttp){alert("Failed to load json data from "+url+"\n"+statusText)};var fDone=function(xmlhttp){f(eval("("+xmlhttp.responseText+")"),url)};Timeline.XmlHttp.get(url,fError,fDone)};Timeline._Impl=function(C,B,A,D){this._containerDiv=C;this._bandInfos=B;this._orientation=A==null?Timeline.HORIZONTAL:A;this._unit=(D!=null)?D:Timeline.NativeDateUnit;this._initialize()};Timeline._Impl.prototype.dispose=function(){for(var A=0;A<this._bands.length;A++){this._bands[A].dispose()}this._bands=null;this._bandInfos=null;this._containerDiv.innerHTML=""};Timeline._Impl.prototype.getBandCount=function(){return this._bands.length};Timeline._Impl.prototype.getBand=function(A){return this._bands[A]};Timeline._Impl.prototype.layout=function(){this._distributeWidths()};Timeline._Impl.prototype.paint=function(){for(var A=0;A<this._bands.length;A++){this._bands[A].paint()}};Timeline._Impl.prototype.getDocument=function(){return this._containerDiv.ownerDocument};Timeline._Impl.prototype.addDiv=function(A){this._containerDiv.appendChild(A)};Timeline._Impl.prototype.removeDiv=function(A){this._containerDiv.removeChild(A)};Timeline._Impl.prototype.isHorizontal=function(){return this._orientation==Timeline.HORIZONTAL};Timeline._Impl.prototype.isVertical=function(){return this._orientation==Timeline.VERTICAL};Timeline._Impl.prototype.getPixelLength=function(){return this._orientation==Timeline.HORIZONTAL?this._containerDiv.offsetWidth:this._containerDiv.offsetHeight};Timeline._Impl.prototype.getPixelWidth=function(){return this._orientation==Timeline.VERTICAL?this._containerDiv.offsetWidth:this._containerDiv.offsetHeight};Timeline._Impl.prototype.getUnit=function(){return this._unit};Timeline._Impl.prototype.loadXML=function(B,D){var A=this;var E=function(H,F,G){alert("Failed to load data xml from "+B+"\n"+H);A.hideLoadingMessage()};var C=function(G){try{var F=G.responseXML;if(!F.documentElement&&G.responseStream){F.load(G.responseStream)}D(F,B)}finally{A.hideLoadingMessage()}};this.showLoadingMessage();window.setTimeout(function(){Timeline.XmlHttp.get(B,E,C)},0)};Timeline._Impl.prototype.loadJSON=function(url,f){var tl=this;var fError=function(statusText,status,xmlhttp){alert("Failed to load json data from "+url+"\n"+statusText);tl.hideLoadingMessage()};var fDone=function(xmlhttp){try{f(eval("("+xmlhttp.responseText+")"),url)}finally{tl.hideLoadingMessage()}};this.showLoadingMessage();window.setTimeout(function(){Timeline.XmlHttp.get(url,fError,fDone)},0)};Timeline._Impl.prototype._initialize=function(){var G=this._containerDiv;var D=G.ownerDocument;G.className=G.className.split(" ").concat("timeline-container").join(" ");while(G.firstChild){G.removeChild(G.firstChild)}var A=Timeline.Graphics.createTranslucentImage(D,Timeline.urlPrefix+(this.isHorizontal()?"images/copyright-vertical.png":"images/copyright.png"));A.className="timeline-copyright";A.title="Timeline (c) SIMILE - http://simile.mit.edu/timeline/";Timeline.DOM.registerEvent(A,"click",function(){window.location="http://simile.mit.edu/timeline/"});G.appendChild(A);this._bands=[];for(var B=0;B<this._bandInfos.length;B++){var F=new Timeline._Band(this,this._bandInfos[B],B);this._bands.push(F)}this._distributeWidths();for(var B=0;B<this._bandInfos.length;B++){var E=this._bandInfos[B];if("syncWith" in E){this._bands[B].setSyncWithBand(this._bands[E.syncWith],("highlight" in E)?E.highlight:false)}}var C=Timeline.Graphics.createMessageBubble(D);C.containerDiv.className="timeline-message-container";G.appendChild(C.containerDiv);C.contentDiv.className="timeline-message";C.contentDiv.innerHTML="<img src='"+Timeline.urlPrefix+"images/progress-running.gif' /> Loading...";this.showLoadingMessage=function(){C.containerDiv.style.display="block"};this.hideLoadingMessage=function(){C.containerDiv.style.display="none"}};Timeline._Impl.prototype._distributeWidths=function(){var B=this.getPixelLength();var A=this.getPixelWidth();var D=0;for(var E=0;E<this._bands.length;E++){var I=this._bands[E];var J=this._bandInfos[E];var F=J.width;var H=F.indexOf("%");if(H>0){var G=parseInt(F.substr(0,H));var C=G*A/100}else{var C=parseInt(F)}I.setBandShiftAndWidth(D,C);I.setViewLength(B);D+=C}};Timeline._Band=function(E,F,B){this._timeline=E;this._bandInfo=F;this._index=B;this._locale=("locale" in F)?F.locale:Timeline.Platform.getDefaultLocale();this._timeZone=("timeZone" in F)?F.timeZone:0;this._labeller=("labeller" in F)?F.labeller:E.getUnit().createLabeller(this._locale,this._timeZone);this._dragging=false;this._changing=false;this._originalScrollSpeed=5;this._scrollSpeed=this._originalScrollSpeed;this._onScrollListeners=[];var A=this;this._syncWithBand=null;this._syncWithBandHandler=function(G){A._onHighlightBandScroll()};this._selectorListener=function(G){A._onHighlightBandScroll()};var D=this._timeline.getDocument().createElement("div");D.className="timeline-band-input";this._timeline.addDiv(D);this._keyboardInput=document.createElement("input"
);this._keyboardInput.type="text";D.appendChild(this._keyboardInput);Timeline.DOM.registerEventWithObject(this._keyboardInput,"keydown",this,this._onKeyDown);Timeline.DOM.registerEventWithObject(this._keyboardInput,"keyup",this,this._onKeyUp);this._div=this._timeline.getDocument().createElement("div");this._div.className="timeline-band";this._timeline.addDiv(this._div);Timeline.DOM.registerEventWithObject(this._div,"mousedown",this,this._onMouseDown);Timeline.DOM.registerEventWithObject(this._div,"mousemove",this,this._onMouseMove);Timeline.DOM.registerEventWithObject(this._div,"mouseup",this,this._onMouseUp);Timeline.DOM.registerEventWithObject(this._div,"mouseout",this,this._onMouseOut);Timeline.DOM.registerEventWithObject(this._div,"dblclick",this,this._onDblClick);this._innerDiv=this._timeline.getDocument().createElement("div");this._innerDiv.className="timeline-band-inner";this._div.appendChild(this._innerDiv);this._ether=F.ether;F.ether.initialize(E);this._etherPainter=F.etherPainter;F.etherPainter.initialize(this,E);this._eventSource=F.eventSource;if(this._eventSource){this._eventListener={onAddMany:function(){A._onAddMany()},onClear:function(){A._onClear()}};this._eventSource.addListener(this._eventListener)}this._eventPainter=F.eventPainter;F.eventPainter.initialize(this,E);this._decorators=("decorators" in F)?F.decorators:[];for(var C=0;C<this._decorators.length;C++){this._decorators[C].initialize(this,E)}this._bubble=null};Timeline._Band.SCROLL_MULTIPLES=5;Timeline._Band.prototype.dispose=function(){this.closeBubble();if(this._eventSource){this._eventSource.removeListener(this._eventListener);this._eventListener=null;this._eventSource=null}this._timeline=null;this._bandInfo=null;this._labeller=null;this._ether=null;this._etherPainter=null;this._eventPainter=null;this._decorators=null;this._onScrollListeners=null;this._syncWithBandHandler=null;this._selectorListener=null;this._div=null;this._innerDiv=null;this._keyboardInput=null;this._bubble=null};Timeline._Band.prototype.addOnScrollListener=function(A){this._onScrollListeners.push(A)};Timeline._Band.prototype.removeOnScrollListener=function(B){for(var A=0;A<this._onScrollListeners.length;A++){if(this._onScrollListeners[A]==B){this._onScrollListeners.splice(A,1);break}}};Timeline._Band.prototype.setSyncWithBand=function(B,A){if(this._syncWithBand){this._syncWithBand.removeOnScrollListener(this._syncWithBandHandler)}this._syncWithBand=B;this._syncWithBand.addOnScrollListener(this._syncWithBandHandler);this._highlight=A;this._positionHighlight()};Timeline._Band.prototype.getLocale=function(){return this._locale};Timeline._Band.prototype.getTimeZone=function(){return this._timeZone};Timeline._Band.prototype.getLabeller=function(){return this._labeller};Timeline._Band.prototype.getIndex=function(){return this._index};Timeline._Band.prototype.getEther=function(){return this._ether};Timeline._Band.prototype.getEtherPainter=function(){return this._etherPainter};Timeline._Band.prototype.getEventSource=function(){return this._eventSource};Timeline._Band.prototype.getEventPainter=function(){return this._eventPainter};Timeline._Band.prototype.layout=function(){this.paint()};Timeline._Band.prototype.paint=function(){this._etherPainter.paint();this._paintDecorators();this._paintEvents()};Timeline._Band.prototype.softLayout=function(){this.softPaint()};Timeline._Band.prototype.softPaint=function(){this._etherPainter.softPaint();this._softPaintDecorators();this._softPaintEvents()};Timeline._Band.prototype.setBandShiftAndWidth=function(A,D){var C=this._keyboardInput.parentNode;var B=A+Math.floor(D/2);if(this._timeline.isHorizontal()){this._div.style.top=A+"px";this._div.style.height=D+"px";C.style.top=B+"px";C.style.left="-1em"}else{this._div.style.left=A+"px";this._div.style.width=D+"px";C.style.left=B+"px";C.style.top="-1em"}};Timeline._Band.prototype.getViewWidth=function(){if(this._timeline.isHorizontal()){return this._div.offsetHeight}else{return this._div.offsetWidth}};Timeline._Band.prototype.setViewLength=function(A){this._viewLength=A;this._recenterDiv();this._onChanging()};Timeline._Band.prototype.getViewLength=function(){return this._viewLength};Timeline._Band.prototype.getTotalViewLength=function(){return Timeline._Band.SCROLL_MULTIPLES*this._viewLength};Timeline._Band.prototype.getViewOffset=function(){return this._viewOffset};Timeline._Band.prototype.getMinDate=function(){return this._ether.pixelOffsetToDate(this._viewOffset)};Timeline._Band.prototype.getMaxDate=function(){return this._ether.pixelOffsetToDate(this._viewOffset+Timeline._Band.SCROLL_MULTIPLES*this._viewLength)};Timeline._Band.prototype.getMinVisibleDate=function(){return this._ether.pixelOffsetToDate(0)};Timeline._Band.prototype.getMaxVisibleDate=function(){return this._ether.pixelOffsetToDate(this._viewLength)};Timeline._Band.prototype.getCenterVisibleDate=function(){return this._ether.pixelOffsetToDate(this._viewLength/2)};Timeline._Band.prototype.setMinVisibleDate=function(A){if(!this._changing){this._moveEther(Math.round(-this._ether.dateToPixelOffset(A)))}};Timeline._Band.prototype.setMaxVisibleDate=function(A){if(!this._changing){this._moveEther(Math.round(this._viewLength-this._ether.dateToPixelOffset(A)))}};Timeline._Band.prototype.setCenterVisibleDate=function(A){if(!this._changing){this._moveEther(Math.round(this._viewLength/2-this._ether.dateToPixelOffset(A)))}};Timeline._Band.prototype.dateToPixelOffset=function(A){return this._ether.dateToPixelOffset(A)-this._viewOffset};Timeline._Band.prototype.pixelOffsetToDate=function(A){return this._ether.pixelOffsetToDate(A+this._viewOffset)};Timeline._Band.prototype.createLayerDiv=function(C){var B=this._timeline.getDocument().createElement("div");B.className="timeline-band-layer";B.style.zIndex=C;this._innerDiv.appendChild(B);var A=this._timeline.getDocument().createElement("div");A.className="timeline-band-layer-inner";if(Timeline.Platform.browser.isIE){A.style.cursor="move"}else{A.style.cursor="-moz-grab"}B.appendChild(A);return A};Timeline._Band.prototype.removeLayerDiv=function(A){this._innerDiv.removeChild(A.parentNode)};Timeline._Band.prototype.closeBubble=function(){if(this._bubble!=null){this._bubble.close();this._bubble=null}};Timeline._Band.prototype.openBubbleForPoint=function(D,B,C,A){this.closeBubble();this._bubble=Timeline.Graphics.createBubbleForPoint(this._timeline.getDocument(),D,B,C,A);return this._bubble.content};Timeline._Band.prototype.scrollToCenter=function(B){var A=this._ether.dateToPixelOffset(B);if(A<-this._viewLength/2){this.setCenterVisibleDate(this.pixelOffsetToDate(A+this._viewLength))}else{if(A>3*this._viewLength/2){this.setCenterVisibleDate(this.pixelOffsetToDate(A-this._viewLength))}}this._autoScroll(Math.round(this._viewLength/2-this._ether.dateToPixelOffset(B)))};Timeline._Band.prototype._onMouseDown=function(B,A,C){this.closeBubble();this._dragging=true;this._dragX=A.clientX;this._dragY=A.clientY};Timeline._Band.prototype._onMouseMove=function(D,A,E){if(this._dragging){var C=A.clientX-this._dragX;var B=A.clientY-this._dragY;this._dragX=A.clientX;this._dragY=A.clientY;this._moveEther(this._timeline.isHorizontal()?C:B);this._positionHighlight()}};Timeline._Band.prototype._onMouseUp=function(B,A,C){this._dragging=false;this._keyboardInput.focus()};Timeline._Band.prototype._onMouseOut=function(B,A,D){var C=Timeline.DOM.getEventRelativeCoordinates(A,B);C.x+=this._viewOffset;if(C.x<0||C.x>B.offsetWidth||C.y<0||C.y>B.offsetHeight){this._dragging=false}};Timeline._Band.prototype._onDblClick=function(B,A,D){var C=Timeline.DOM.getEventRelativeCoordinates(A,B);var E=C.x-(this._viewLength/2-this._viewOffset);this._autoScroll(-E)};Timeline._Band.prototype._onKeyDown=function(B,A,C){if(!this._dragging){switch(A.keyCode){case 27:break;case 37:case 38:this._scrollSpeed=Math.min(50,Math.abs(this._scrollSpeed*1.05));this._moveEther(this._scrollSpeed);break;case 39:case 40:this._scrollSpeed=-Math.min(50,Math.abs(this._scrollSpeed*1.05));this._moveEther(this._scrollSpeed);break;default:return true}this.closeBubble();Timeline.DOM.cancelEvent(A);return false}return true};Timeline._Band.prototype._onKeyUp=function(B,A,C){if(!this._dragging){this._scrollSpeed=this._originalScrollSpeed;switch(A.keyCode){case 35:this.setCenterVisibleDate(this._eventSource.getLatestDate());break;case 36:this.setCenterVisibleDate(this._eventSource.getEarliestDate());break;case 33:this._autoScroll(this._timeline.getPixelLength());break;case 34:this._autoScroll(-this._timeline.getPixelLength());break;default:return true}this.closeBubble();Timeline.DOM.cancelEvent(A);return false}return true};Timeline._Band.prototype._autoScroll=function(C){var A=this;var B=Timeline.Graphics.createAnimation(function(D,E){A._moveEther(E)},0,C,1000);B.run()};Timeline._Band.prototype._moveEther=function(A){this.closeBubble();this._viewOffset+=A;this._ether.shiftPixels(-A);if(this._timeline.isHorizontal()){this._div.style.left=this._viewOffset+"px"}else{this._div.style.top=this._viewOffset+"px"}if(this._viewOffset>-this._viewLength*0.5||this._viewOffset<-this._viewLength*(Timeline._Band.SCROLL_MULTIPLES-1.5)){this._recenterDiv()}else{this.softLayout()}this._onChanging()};Timeline._Band.prototype._onChanging=function(){this._changing=true;this._fireOnScroll();this._setSyncWithBandDate();this._changing=false};Timeline._Band.prototype._fireOnScroll=function(){for(var A=0;A<this._onScrollListeners.length;A++){this._onScrollListeners[A](this)}};Timeline._Band.prototype._setSyncWithBandDate=function(){if(this._syncWithBand){var A=this._ether.pixelOffsetToDate(this.getViewLength()/2);this._syncWithBand.setCenterVisibleDate(A)}};Timeline._Band.prototype._onHighlightBandScroll=function(){if(this._syncWithBand){var A=this._syncWithBand.getCenterVisibleDate();var B=this._ether.dateToPixelOffset(A);this._moveEther(Math.round(this._viewLength/2-B));if(this._highlight){this._etherPainter.setHighlight(this._syncWithBand.getMinVisibleDate(),this._syncWithBand.getMaxVisibleDate()
)}}};Timeline._Band.prototype._onAddMany=function(){this._paintEvents()};Timeline._Band.prototype._onClear=function(){this._paintEvents()};Timeline._Band.prototype._positionHighlight=function(){if(this._syncWithBand){var A=this._syncWithBand.getMinVisibleDate();var B=this._syncWithBand.getMaxVisibleDate();if(this._highlight){this._etherPainter.setHighlight(A,B)}}};Timeline._Band.prototype._recenterDiv=function(){this._viewOffset=-this._viewLength*(Timeline._Band.SCROLL_MULTIPLES-1)/2;if(this._timeline.isHorizontal()){this._div.style.left=this._viewOffset+"px";this._div.style.width=(Timeline._Band.SCROLL_MULTIPLES*this._viewLength)+"px"}else{this._div.style.top=this._viewOffset+"px";this._div.style.height=(Timeline._Band.SCROLL_MULTIPLES*this._viewLength)+"px"}this.layout()};Timeline._Band.prototype._paintEvents=function(){this._eventPainter.paint()};Timeline._Band.prototype._softPaintEvents=function(){this._eventPainter.softPaint()};Timeline._Band.prototype._paintDecorators=function(){for(var A=0;A<this._decorators.length;A++){this._decorators[A].paint()}};Timeline._Band.prototype._softPaintDecorators=function(){for(var A=0;A<this._decorators.length;A++){this._decorators[A].softPaint()}};Timeline.Platform.os={isMac:false,isWin:false,isWin32:false,isUnix:false};Timeline.Platform.browser={isIE:false,isNetscape:false,isMozilla:false,isFirefox:false,isOpera:false,isSafari:false,majorVersion:0,minorVersion:0};(function(){var C=navigator.appName.toLowerCase();var A=navigator.userAgent.toLowerCase();Timeline.Platform.os.isMac=(A.indexOf("mac")!=-1);Timeline.Platform.os.isWin=(A.indexOf("win")!=-1);Timeline.Platform.os.isWin32=Timeline.Platform.isWin&&(A.indexOf("95")!=-1||A.indexOf("98")!=-1||A.indexOf("nt")!=-1||A.indexOf("win32")!=-1||A.indexOf("32bit")!=-1);Timeline.Platform.os.isUnix=(A.indexOf("x11")!=-1);Timeline.Platform.browser.isIE=(C.indexOf("microsoft")!=-1);Timeline.Platform.browser.isNetscape=(C.indexOf("netscape")!=-1);Timeline.Platform.browser.isMozilla=(A.indexOf("mozilla")!=-1);Timeline.Platform.browser.isFirefox=(A.indexOf("firefox")!=-1);Timeline.Platform.browser.isOpera=(C.indexOf("opera")!=-1);var E=function(G){var F=G.split(".");Timeline.Platform.browser.majorVersion=parseInt(F[0]);Timeline.Platform.browser.minorVersion=parseInt(F[1])};var B=function(H,G,I){var F=H.indexOf(G,I);return F>=0?F:H.length};if(Timeline.Platform.browser.isMozilla){var D=A.indexOf("mozilla/");if(D>=0){E(A.substring(D+8,B(A," ",D)))}}if(Timeline.Platform.browser.isIE){var D=A.indexOf("msie ");if(D>=0){E(A.substring(D+5,B(A,";",D)))}}if(Timeline.Platform.browser.isNetscape){var D=A.indexOf("rv:");if(D>=0){E(A.substring(D+3,B(A,")",D)))}}if(Timeline.Platform.browser.isFirefox){var D=A.indexOf("firefox/");if(D>=0){E(A.substring(D+8,B(A," ",D)))}}})();Timeline.Platform.getDefaultLocale=function(){return Timeline.Platform.clientLocale};Timeline.SortedArray=function(B,A){this._a=(A instanceof Array)?A:[];this._compare=B};Timeline.SortedArray.prototype.add=function(C){var A=this;var B=this.find(function(D){return A._compare(D,C)});if(B<this._a.length){this._a.splice(B,0,C)}else{this._a.push(C)}};Timeline.SortedArray.prototype.remove=function(C){var A=this;var B=this.find(function(D){return A._compare(D,C)});while(B<this._a.length&&this._compare(this._a[B],C)==0){if(this._a[B]==C){this._a.splice(B,1);return true}else{B++}}return false};Timeline.SortedArray.prototype.removeAll=function(){this._a=[]};Timeline.SortedArray.prototype.elementAt=function(A){return this._a[A]};Timeline.SortedArray.prototype.length=function(){return this._a.length};Timeline.SortedArray.prototype.find=function(D){var B=0;var A=this._a.length;while(B<A){var C=Math.floor((B+A)/2);var E=D(this._a[C]);if(C==B){return E<0?B+1:B}else{if(E<0){B=C}else{A=C}}}return B};Timeline.SortedArray.prototype.getFirst=function(){return(this._a.length>0)?this._a[0]:null};Timeline.SortedArray.prototype.getLast=function(){return(this._a.length>0)?this._a[this._a.length-1]:null};Timeline.EventIndex=function(B){var A=this;this._unit=(B!=null)?B:Timeline.NativeDateUnit;this._events=new Timeline.SortedArray(function(D,C){return A._unit.compare(D.getStart(),C.getStart())});this._indexed=true};Timeline.EventIndex.prototype.getUnit=function(){return this._unit};Timeline.EventIndex.prototype.add=function(A){this._events.add(A);this._indexed=false};Timeline.EventIndex.prototype.removeAll=function(){this._events.removeAll();this._indexed=false};Timeline.EventIndex.prototype.getCount=function(){return this._events.length()};Timeline.EventIndex.prototype.getIterator=function(A,B){if(!this._indexed){this._index()}return new Timeline.EventIndex._Iterator(this._events,A,B,this._unit)};Timeline.EventIndex.prototype.getAllIterator=function(){return new Timeline.EventIndex._AllIterator(this._events)};Timeline.EventIndex.prototype.getEarliestDate=function(){var A=this._events.getFirst();return(A==null)?null:A.getStart()};Timeline.EventIndex.prototype.getLatestDate=function(){var A=this._events.getLast();if(A==null){return null}if(!this._indexed){this._index()}var C=A._earliestOverlapIndex;var B=this._events.elementAt(C).getEnd();for(var D=C+1;D<this._events.length();D++){B=this._unit.later(B,this._events.elementAt(D).getEnd())}return B};Timeline.EventIndex.prototype._index=function(){var D=this._events.length();for(var E=0;E<D;E++){var C=this._events.elementAt(E);C._earliestOverlapIndex=E}var G=1;for(var E=0;E<D;E++){var C=this._events.elementAt(E);var B=C.getEnd();G=Math.max(G,E+1);while(G<D){var A=this._events.elementAt(G);var F=A.getStart();if(this._unit.compare(F,B)<0){A._earliestOverlapIndex=E;G++}else{break}}}this._indexed=true};Timeline.EventIndex._Iterator=function(B,A,D,C){this._events=B;this._startDate=A;this._endDate=D;this._unit=C;this._currentIndex=B.find(function(E){return C.compare(E.getStart(),A)});if(this._currentIndex-1>=0){this._currentIndex=this._events.elementAt(this._currentIndex-1)._earliestOverlapIndex}this._currentIndex--;this._maxIndex=B.find(function(E){return C.compare(E.getStart(),D)});this._hasNext=false;this._next=null;this._findNext()};Timeline.EventIndex._Iterator.prototype={hasNext:function(){return this._hasNext},next:function(){if(this._hasNext){var A=this._next;this._findNext();return A}else{return null}},_findNext:function(){var B=this._unit;while((++this._currentIndex)<this._maxIndex){var A=this._events.elementAt(this._currentIndex);if(B.compare(A.getStart(),this._endDate)<0&&B.compare(A.getEnd(),this._startDate)>0){this._next=A;this._hasNext=true;return }}this._next=null;this._hasNext=false}};Timeline.EventIndex._AllIterator=function(A){this._events=A;this._index=0};Timeline.EventIndex._AllIterator.prototype={hasNext:function(){return this._index<this._events.length()},next:function(){return this._index<this._events.length()?this._events.elementAt(this._index++):null}};Timeline.DateTime=new Object();Timeline.DateTime.MILLISECOND=0;Timeline.DateTime.SECOND=1;Timeline.DateTime.MINUTE=2;Timeline.DateTime.HOUR=3;Timeline.DateTime.DAY=4;Timeline.DateTime.WEEK=5;Timeline.DateTime.MONTH=6;Timeline.DateTime.YEAR=7;Timeline.DateTime.DECADE=8;Timeline.DateTime.CENTURY=9;Timeline.DateTime.MILLENNIUM=10;Timeline.DateTime.EPOCH=-1;Timeline.DateTime.ERA=-2;Timeline.DateTime.gregorianUnitLengths=[];(function(){var B=Timeline.DateTime;var A=B.gregorianUnitLengths;A[B.MILLISECOND]=1;A[B.SECOND]=1000;A[B.MINUTE]=A[B.SECOND]*60;A[B.HOUR]=A[B.MINUTE]*60;A[B.DAY]=A[B.HOUR]*24;A[B.WEEK]=A[B.DAY]*7;A[B.MONTH]=A[B.DAY]*31;A[B.YEAR]=A[B.DAY]*365;A[B.DECADE]=A[B.YEAR]*10;A[B.CENTURY]=A[B.YEAR]*100;A[B.MILLENNIUM]=A[B.YEAR]*1000})();Timeline.DateTime.parseGregorianDateTime=function(G){if(G==null){return null}else{if(G instanceof Date){return G}}var B=G.toString();if(B.length>0&&B.length<8){var C=B.indexOf(" ");if(C>0){var A=parseInt(B.substr(0,C));var E=B.substr(C+1);if(E.toLowerCase()=="bc"){A=1-A}}else{var A=parseInt(B)}var F=new Date(0);F.setUTCFullYear(A);return F}try{return new Date(Date.parse(B))}catch(D){return null}};Timeline.DateTime._iso8601DateRegExp="^(-?)([0-9]{4})("+["(-?([0-9]{2})(-?([0-9]{2}))?)","(-?([0-9]{3}))","(-?W([0-9]{2})(-?([1-7]))?)"].join("|")+")?$";Timeline.DateTime.setIso8601Date=function(H,F){var J=Timeline.DateTime._iso8601DateRegExp;var I=F.match(new RegExp(J));if(!I){throw new Error("Invalid date string: "+F)}var B=(I[1]=="-")?-1:1;var K=B*I[2];var G=I[5];var C=I[7];var E=I[9];var A=I[11];var N=(I[13])?I[13]:1;H.setUTCFullYear(K);if(E){H.setUTCMonth(0);H.setUTCDate(Number(E))}else{if(A){H.setUTCMonth(0);H.setUTCDate(1);var M=H.getUTCDay();var L=(M)?M:7;var D=Number(N)+(7*Number(A));if(L<=4){H.setUTCDate(D+1-L)}else{H.setUTCDate(D+8-L)}}else{if(G){H.setUTCDate(1);H.setUTCMonth(G-1)}if(C){H.setUTCDate(C)}}}return H};Timeline.DateTime.setIso8601Time=function(G,E){var F="Z|(([-+])([0-9]{2})(:?([0-9]{2}))?)$";var H=E.match(new RegExp(F));var C=0;if(H){if(H[0]!="Z"){C=(Number(H[3])*60)+Number(H[5]);C*=((H[2]=="-")?1:-1)}E=E.substr(0,E.length-H[0].length)}var I="^([0-9]{2})(:?([0-9]{2})(:?([0-9]{2})(.([0-9]+))?)?)?$";var H=E.match(new RegExp(I));if(!H){dojo.debug("invalid time string: "+E);return false}var J=H[1];var B=Number((H[3])?H[3]:0);var D=(H[5])?H[5]:0;var A=H[7]?(Number("0."+H[7])*1000):0;G.setUTCHours(J);G.setUTCMinutes(B);G.setUTCSeconds(D);G.setUTCMilliseconds(A);return G};Timeline.DateTime.setIso8601=function(B,A){var C=(A.indexOf("T")==-1)?A.split(" "):A.split("T");Timeline.DateTime.setIso8601Date(B,C[0]);if(C.length==2){Timeline.DateTime.setIso8601Time(B,C[1])}return B};Timeline.DateTime.parseIso8601DateTime=function(A){try{return Timeline.DateTime.setIso8601(new Date(0),A)}catch(B){return null}};Timeline.DateTime.roundDownToInterval=function(B,G,J,K,A){var D=J*Timeline.DateTime.gregorianUnitLengths[Timeline.DateTime.HOUR];var I=new Date(B.getTime()+D);var E=function(L){L.setUTCMilliseconds(0);L.setUTCSeconds(0);L.setUTCMinutes(0);L.setUTCHours(0)};var
 C=function(L){E(L);L.setUTCDate(1);L.setUTCMonth(0)};switch(G){case Timeline.DateTime.MILLISECOND:var H=I.getUTCMilliseconds();I.setUTCMilliseconds(H-(H%K));break;case Timeline.DateTime.SECOND:I.setUTCMilliseconds(0);var H=I.getUTCSeconds();I.setUTCSeconds(H-(H%K));break;case Timeline.DateTime.MINUTE:I.setUTCMilliseconds(0);I.setUTCSeconds(0);var H=I.getUTCMinutes();I.setTime(I.getTime()-(H%K)*Timeline.DateTime.gregorianUnitLengths[Timeline.DateTime.MINUTE]);break;case Timeline.DateTime.HOUR:I.setUTCMilliseconds(0);I.setUTCSeconds(0);I.setUTCMinutes(0);var H=I.getUTCHours();I.setUTCHours(H-(H%K));break;case Timeline.DateTime.DAY:E(I);break;case Timeline.DateTime.WEEK:E(I);var F=(I.getUTCDay()+7-A)%7;I.setTime(I.getTime()-F*Timeline.DateTime.gregorianUnitLengths[Timeline.DateTime.DAY]);break;case Timeline.DateTime.MONTH:E(I);I.setUTCDate(1);var H=I.getUTCMonth();I.setUTCMonth(H-(H%K));break;case Timeline.DateTime.YEAR:C(I);var H=I.getUTCFullYear();I.setUTCFullYear(H-(H%K));break;case Timeline.DateTime.DECADE:C(I);I.setUTCFullYear(Math.floor(I.getUTCFullYear()/10)*10);break;case Timeline.DateTime.CENTURY:C(I);I.setUTCFullYear(Math.floor(I.getUTCFullYear()/100)*100);break;case Timeline.DateTime.MILLENNIUM:C(I);I.setUTCFullYear(Math.floor(I.getUTCFullYear()/1000)*1000);break}B.setTime(I.getTime()-D)};Timeline.DateTime.roundUpToInterval=function(D,F,C,A,B){var E=D.getTime();Timeline.DateTime.roundDownToInterval(D,F,C,A,B);if(D.getTime()<E){D.setTime(D.getTime()+Timeline.DateTime.gregorianUnitLengths[F]*A)}};Timeline.DateTime.incrementByInterval=function(A,B){switch(B){case Timeline.DateTime.MILLISECOND:A.setTime(A.getTime()+1);break;case Timeline.DateTime.SECOND:A.setTime(A.getTime()+1000);break;case Timeline.DateTime.MINUTE:A.setTime(A.getTime()+Timeline.DateTime.gregorianUnitLengths[Timeline.DateTime.MINUTE]);break;case Timeline.DateTime.HOUR:A.setTime(A.getTime()+Timeline.DateTime.gregorianUnitLengths[Timeline.DateTime.HOUR]);break;case Timeline.DateTime.DAY:A.setUTCDate(A.getUTCDate()+1);break;case Timeline.DateTime.WEEK:A.setUTCDate(A.getUTCDate()+7);break;case Timeline.DateTime.MONTH:A.setUTCMonth(A.getUTCMonth()+1);break;case Timeline.DateTime.YEAR:A.setUTCFullYear(A.getUTCFullYear()+1);break;case Timeline.DateTime.DECADE:A.setUTCFullYear(A.getUTCFullYear()+10);break;case Timeline.DateTime.CENTURY:A.setUTCFullYear(A.getUTCFullYear()+100);break;case Timeline.DateTime.MILLENNIUM:A.setUTCFullYear(A.getUTCFullYear()+1000);break}};Timeline.DateTime.removeTimeZoneOffset=function(B,A){return new Date(B.getTime()+A*Timeline.DateTime.gregorianUnitLengths[Timeline.DateTime.HOUR])};Timeline.Debug=new Object();Timeline.Debug.log=function(A){};Timeline.Debug.exception=function(A){alert("Caught exception: "+(Timeline.Platform.isIE?A.message:A))};Timeline.DOM=new Object();Timeline.DOM.registerEventWithObject=function(B,A,D,C){Timeline.DOM.registerEvent(B,A,function(F,E,G){return C.call(D,F,E,G)})};Timeline.DOM.registerEvent=function(C,B,D){var A=function(E){E=(E)?E:((event)?event:null);if(E){var F=(E.target)?E.target:((E.srcElement)?E.srcElement:null);if(F){F=(F.nodeType==1||F.nodeType==9)?F:F.parentNode}return D(C,E,F)}return true};if(Timeline.Platform.browser.isIE){C.attachEvent("on"+B,A)}else{C.addEventListener(B,A,false)}};Timeline.DOM.getPageCoordinates=function(A){var C=0;var B=0;if(A.nodeType!=1){A=A.parentNode}while(A!=null){C+=A.offsetLeft;
//GEOMATYS
B=A.offsetTop;A=A.offsetParent}return{left:C,top:B}};Timeline.DOM.getEventRelativeCoordinates=function(A,B){if(Timeline.Platform.browser.isIE){return{x:A.offsetX,y:A.offsetY}}else{var C=Timeline.DOM.getPageCoordinates(B);return{x:A.pageX-C.left,y:A.pageY-C.top}}};Timeline.DOM.cancelEvent=function(A){A.returnValue=false;A.cancelBubble=true;if("preventDefault" in A){A.preventDefault()}};Timeline.Graphics=new Object();Timeline.Graphics.pngIsTranslucent=(!Timeline.Platform.browser.isIE)||(Timeline.Platform.browser.majorVersion>6);Timeline.Graphics.createTranslucentImage=function(C,A,D){var B;if(Timeline.Graphics.pngIsTranslucent){B=C.createElement("img");B.setAttribute("src",A)}else{B=C.createElement("img");B.style.display="inline";B.style.width="1px";B.style.height="1px";B.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+A+"', sizingMethod='image')"}B.style.verticalAlign=(D!=null)?D:"middle";return B};Timeline.Graphics.setOpacity=function(B,A){if(Timeline.Platform.browser.isIE){B.style.filter="progid:DXImageTransform.Microsoft.Alpha(Style=0,Opacity="+A+")"}else{var C=(A/100).toString();B.style.opacity=C;B.style.MozOpacity=C}};Timeline.Graphics._bubbleMargins={top:33,bottom:42,left:33,right:40};Timeline.Graphics._arrowOffsets={top:0,bottom:9,left:1,right:8};Timeline.Graphics._bubblePadding=15;Timeline.Graphics._bubblePointOffset=6;Timeline.Graphics._halfArrowWidth=18;Timeline.Graphics.createBubbleForPoint=function(U,C,B,L,P){function R(){if(typeof window.innerWidth=="number"){return{w:window.innerWidth,h:window.innerHeight}}else{if(document.documentElement&&document.documentElement.clientWidth){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}else{if(document.body&&document.body.clientWidth){return{w:document.body.clientWidth,h:document.body.clientHeight}}}}}var K={_closed:false,_doc:U,close:function(){if(!this._closed){this._doc.body.removeChild(this._div);this._doc=null;this._div=null;this._content=null;this._closed=true}}};var M=R();var G=M.w;var F=M.h;var D=Timeline.Graphics._bubbleMargins;L=parseInt(L,10);P=parseInt(P,10);var N=D.left+L+D.right;var S=D.top+P+D.bottom;var O=Timeline.Graphics.pngIsTranslucent;var I=Timeline.urlPrefix;var A=function(X,W,Y,V){X.style.position="absolute";X.style.width=Y+"px";X.style.height=V+"px";if(O){X.style.background="url("+W+")"}else{X.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+W+"', sizingMethod='crop')"}};var J=U.createElement("div");J.style.width=N+"px";J.style.height=S+"px";J.style.position="absolute";J.style.zIndex=1000;K._div=J;var H=U.createElement("div");H.style.width="100%";H.style.height="100%";H.style.position="relative";J.appendChild(H);var Q=function(X,a,Z,Y,W){var V=U.createElement("div");V.style.left=a+"px";V.style.top=Z+"px";A(V,X,Y,W);H.appendChild(V)};Q(I+"images/bubble-top-left.png",0,0,D.left,D.top);Q(I+"images/bubble-top.png",D.left,0,L,D.top);Q(I+"images/bubble-top-right.png",D.left+L,0,D.right,D.top);Q(I+"images/bubble-left.png",0,D.top,D.left,P);Q(I+"images/bubble-right.png",D.left+L,D.top,D.right,P);Q(I+"images/bubble-bottom-left.png",0,D.top+P,D.left,D.bottom);Q(I+"images/bubble-bottom.png",D.left,D.top+P,L,D.bottom);Q(I+"images/bubble-bottom-right.png",D.left+L,D.top+P,D.right,D.bottom);var T=U.createElement("div");T.style.left=(N-D.right+Timeline.Graphics._bubblePadding-16-2)+"px";T.style.top=(D.top-Timeline.Graphics._bubblePadding+1)+"px";T.style.cursor="pointer";A(T,I+"images/close-button.png",16,16);Timeline.DOM.registerEventWithObject(T,"click",K,K.close);H.appendChild(T);var E=U.createElement("div");E.style.position="absolute";E.style.left=D.left+"px";E.style.top=D.top+"px";E.style.width=L+"px";E.style.height=P+"px";E.style.overflow="auto";E.style.background="white";H.appendChild(E);K.content=E;(function(){if(C-Timeline.Graphics._halfArrowWidth-Timeline.Graphics._bubblePadding>0&&C+Timeline.Graphics._halfArrowWidth+Timeline.Graphics._bubblePadding<G){var X=C-Math.round(L/2)-D.left;X=C<(G/2)?Math.max(X,-(D.left-Timeline.Graphics._bubblePadding)):Math.min(X,G+(D.right-Timeline.Graphics._bubblePadding)-N);if(B-Timeline.Graphics._bubblePointOffset-S>0){var V=U.createElement("div");V.style.left=(C-Timeline.Graphics._halfArrowWidth-X)+"px";V.style.top=(D.top+P)+"px";A(V,I+"images/bubble-bottom-arrow.png",37,D.bottom);H.appendChild(V);J.style.left=X+"px";J.style.top=(B-Timeline.Graphics._bubblePointOffset-S+Timeline.Graphics._arrowOffsets.bottom)+"px";return }else{if(B+Timeline.Graphics._bubblePointOffset+S<F){var V=U.createElement("div");V.style.left=(C-Timeline.Graphics._halfArrowWidth-X)+"px";V.style.top="0px";A(V,I+"images/bubble-top-arrow.png",37,D.top);H.appendChild(V);J.style.left=X+"px";J.style.top=(B+Timeline.Graphics._bubblePointOffset-Timeline.Graphics._arrowOffsets.top)+"px";return }}}var W=B-Math.round(P/2)-D.top;W=B<(F/2)?Math.max(W,-(D.top-Timeline.Graphics._bubblePadding)):Math.min(W,F+(D.bottom-Timeline.Graphics._bubblePadding)-S);if(C-Timeline.Graphics._bubblePointOffset-N>0){var V=U.createElement("div");V.style.left=(D.left+L)+"px";V.style.top=(B-Timeline.Graphics._halfArrowWidth-W)+"px";A(V,I+"images/bubble-right-arrow.png",D.right,37);H.appendChild(V);J.style.left=(C-Timeline.Graphics._bubblePointOffset-N+Timeline.Graphics._arrowOffsets.right)+"px";J.style.top=W+"px"}else{var V=U.createElement("div");V.style.left="0px";V.style.top=(B-Timeline.Graphics._halfArrowWidth-W)+"px";A(V,I+"images/bubble-left-arrow.png",D.left,37);H.appendChild(V);J.style.left=(C+Timeline.Graphics._bubblePointOffset-Timeline.Graphics._arrowOffsets.left)+"px";J.style.top=W+"px"}})();U.body.appendChild(J);return K};Timeline.Graphics.createMessageBubble=function(H){var G=H.createElement("div");if(Timeline.Graphics.pngIsTranslucent){var I=H.createElement("div");I.style.height="33px";I.style.background="url("+Timeline.urlPrefix+"images/message-top-left.png) top left no-repeat";I.style.paddingLeft="44px";G.appendChild(I);var C=H.createElement("div");C.style.height="33px";C.style.background="url("+Timeline.urlPrefix+"images/message-top-right.png) top right no-repeat";I.appendChild(C);var F=H.createElement("div");F.style.background="url("+Timeline.urlPrefix+"images/message-left.png) top left repeat-y";F.style.paddingLeft="44px";G.appendChild(F);var A=H.createElement("div");A.style.background="url("+Timeline.urlPrefix+"images/message-right.png) top right repeat-y";A.style.paddingRight="44px";F.appendChild(A);var D=H.createElement("div");A.appendChild(D);var
 B=H.createElement("div");B.style.height="55px";B.style.background="url("+Timeline.urlPrefix+"images/message-bottom-left.png) bottom left no-repeat";B.style.paddingLeft="44px";G.appendChild(B);var E=H.createElement("div");E.style.height="55px";E.style.background="url("+Timeline.urlPrefix+"images/message-bottom-right.png) bottom right no-repeat";B.appendChild(E)}else{G.style.border="2px solid #7777AA";G.style.padding="20px";G.style.background="white";Timeline.Graphics.setOpacity(G,90);var D=H.createElement("div");G.appendChild(D)}return{containerDiv:G,contentDiv:D}};Timeline.Graphics.createAnimation=function(A,D,C,B){return new Timeline.Graphics._Animation(A,D,C,B)};Timeline.Graphics._Animation=function(A,D,C,B){this.f=A;this.from=D;this.to=C;this.current=D;this.duration=B;this.start=new Date().getTime();this.timePassed=0};Timeline.Graphics._Animation.prototype.run=function(){var A=this;window.setTimeout(function(){A.step()},100)};Timeline.Graphics._Animation.prototype.step=function(){this.timePassed+=100;var B=this.timePassed/this.duration;var A=-Math.cos(B*Math.PI)/2+0.5;var D=A*(this.to-this.from)+this.from;try{this.f(D,D-this.current)}catch(C){}this.current=D;if(this.timePassed<this.duration){this.run()}};Timeline.HTML=new Object();Timeline.HTML._e2uHash={};(function(){e2uHash=Timeline.HTML._e2uHash;e2uHash.nbsp="\u00A0[space]";e2uHash.iexcl="\u00A1";e2uHash.cent="\u00A2";e2uHash.pound="\u00A3";e2uHash.curren="\u00A4";e2uHash.yen="\u00A5";e2uHash.brvbar="\u00A6";e2uHash.sect="\u00A7";e2uHash.uml="\u00A8";e2uHash.copy="\u00A9";e2uHash.ordf="\u00AA";e2uHash.laquo="\u00AB";e2uHash.not="\u00AC";e2uHash.shy="\u00AD";e2uHash.reg="\u00AE";e2uHash.macr="\u00AF";e2uHash.deg="\u00B0";e2uHash.plusmn="\u00B1";e2uHash.sup2="\u00B2";e2uHash.sup3="\u00B3";e2uHash.acute="\u00B4";e2uHash.micro="\u00B5";e2uHash.para="\u00B6";e2uHash.middot="\u00B7";e2uHash.cedil="\u00B8";e2uHash.sup1="\u00B9";e2uHash.ordm="\u00BA";e2uHash.raquo="\u00BB";e2uHash.frac14="\u00BC";e2uHash.frac12="\u00BD";e2uHash.frac34="\u00BE";e2uHash.iquest="\u00BF";e2uHash.Agrave="\u00C0";e2uHash.Aacute="\u00C1";e2uHash.Acirc="\u00C2";e2uHash.Atilde="\u00C3";e2uHash.Auml="\u00C4";e2uHash.Aring="\u00C5";e2uHash.AElig="\u00C6";e2uHash.Ccedil="\u00C7";e2uHash.Egrave="\u00C8";e2uHash.Eacute="\u00C9";e2uHash.Ecirc="\u00CA";e2uHash.Euml="\u00CB";e2uHash.Igrave="\u00CC";e2uHash.Iacute="\u00CD";e2uHash.Icirc="\u00CE";e2uHash.Iuml="\u00CF";e2uHash.ETH="\u00D0";e2uHash.Ntilde="\u00D1";e2uHash.Ograve="\u00D2";e2uHash.Oacute="\u00D3";e2uHash.Ocirc="\u00D4";e2uHash.Otilde="\u00D5";e2uHash.Ouml="\u00D6";e2uHash.times="\u00D7";e2uHash.Oslash="\u00D8";e2uHash.Ugrave="\u00D9";e2uHash.Uacute="\u00DA";e2uHash.Ucirc="\u00DB";e2uHash.Uuml="\u00DC";e2uHash.Yacute="\u00DD";e2uHash.THORN="\u00DE";e2uHash.szlig="\u00DF";e2uHash.agrave="\u00E0";e2uHash.aacute="\u00E1";e2uHash.acirc="\u00E2";e2uHash.atilde="\u00E3";e2uHash.auml="\u00E4";e2uHash.aring="\u00E5";e2uHash.aelig="\u00E6";e2uHash.ccedil="\u00E7";e2uHash.egrave="\u00E8";e2uHash.eacute="\u00E9";e2uHash.ecirc="\u00EA";e2uHash.euml="\u00EB";e2uHash.igrave="\u00EC";e2uHash.iacute="\u00ED";e2uHash.icirc="\u00EE";e2uHash.iuml="\u00EF";e2uHash.eth="\u00F0";e2uHash.ntilde="\u00F1";e2uHash.ograve="\u00F2";e2uHash.oacute="\u00F3";e2uHash.ocirc="\u00F4";e2uHash.otilde="\u00F5";e2uHash.ouml="\u00F6";e2uHash.divide="\u00F7";e2uHash.oslash="\u00F8";e2uHash.ugrave="\u00F9";e2uHash.uacute="\u00FA";e2uHash.ucirc="\u00FB";e2uHash.uuml="\u00FC";e2uHash.yacute="\u00FD";e2uHash.thorn="\u00FE";e2uHash.yuml="\u00FF";e2uHash.quot="\u0022";e2uHash.amp="\u0026";e2uHash.lt="\u003C";e2uHash.gt="\u003E";e2uHash.OElig="";e2uHash.oelig="\u0153";e2uHash.Scaron="\u0160";e2uHash.scaron="\u0161";e2uHash.Yuml="\u0178";e2uHash.circ="\u02C6";e2uHash.tilde="\u02DC";e2uHash.ensp="\u2002";e2uHash.emsp="\u2003";e2uHash.thinsp="\u2009";e2uHash.zwnj="\u200C";e2uHash.zwj="\u200D";e2uHash.lrm="\u200E";e2uHash.rlm="\u200F";e2uHash.ndash="\u2013";e2uHash.mdash="\u2014";e2uHash.lsquo="\u2018";e2uHash.rsquo="\u2019";e2uHash.sbquo="\u201A";e2uHash.ldquo="\u201C";e2uHash.rdquo="\u201D";e2uHash.bdquo="\u201E";e2uHash.dagger="\u2020";e2uHash.Dagger="\u2021";e2uHash.permil="\u2030";e2uHash.lsaquo="\u2039";e2uHash.rsaquo="\u203A";e2uHash.euro="\u20AC";e2uHash.fnof="\u0192";e2uHash.Alpha="\u0391";e2uHash.Beta="\u0392";e2uHash.Gamma="\u0393";e2uHash.Delta="\u0394";e2uHash.Epsilon="\u0395";e2uHash.Zeta="\u0396";e2uHash.Eta="\u0397";e2uHash.Theta="\u0398";e2uHash.Iota="\u0399";e2uHash.Kappa="\u039A";e2uHash.Lambda="\u039B";e2uHash.Mu="\u039C";e2uHash.Nu="\u039D";e2uHash.Xi="\u039E";e2uHash.Omicron="\u039F";e2uHash.Pi="\u03A0";e2uHash.Rho="\u03A1";e2uHash.Sigma="\u03A3";e2uHash.Tau="\u03A4";e2uHash.Upsilon="\u03A5";e2uHash.Phi="\u03A6";e2uHash.Chi="\u03A7";e2uHash.Psi="\u03A8";e2uHash.Omega="\u03A9";e2uHash.alpha="\u03B1";e2uHash.beta="\u03B2";e2uHash.gamma="\u03B3";e2uHash.delta="\u03B4";e2uHash.epsilon="\u03B5";e2uHash.zeta="\u03B6";e2uHash.eta="\u03B7";e2uHash.theta="\u03B8";e2uHash.iota="\u03B9";e2uHash.kappa="\u03BA";e2uHash.lambda="\u03BB";e2uHash.mu="\u03BC";e2uHash.nu="\u03BD";e2uHash.xi="\u03BE";e2uHash.omicron="\u03BF";e2uHash.pi="\u03C0";e2uHash.rho="\u03C1";e2uHash.sigmaf="\u03C2";e2uHash.sigma="\u03C3";e2uHash.tau="\u03C4";e2uHash.upsilon="\u03C5";e2uHash.phi="\u03C6";e2uHash.chi="\u03C7";e2uHash.psi="\u03C8";e2uHash.omega="\u03C9";e2uHash.thetasym="\u03D1";e2uHash.upsih="\u03D2";e2uHash.piv="\u03D6";e2uHash.bull="\u2022";e2uHash.hellip="\u2026";e2uHash.prime="\u2032";e2uHash.Prime="\u2033";e2uHash.oline="\u203E";e2uHash.frasl="\u2044";e2uHash.weierp="\u2118";e2uHash.image="\u2111";e2uHash.real="\u211C";e2uHash.trade="\u2122";e2uHash.alefsym="\u2135";e2uHash.larr="\u2190";e2uHash.uarr="\u2191";e2uHash.rarr="\u2192";e2uHash.darr="\u2193";e2uHash.harr="\u2194";e2uHash.crarr="\u21B5";e2uHash.lArr="\u21D0";e2uHash.uArr="\u21D1";e2uHash.rArr="\u21D2";e2uHash.dArr="\u21D3";e2uHash.hArr="\u21D4";e2uHash.forall="\u2200";e2uHash.part="\u2202";e2uHash.exist="\u2203";e2uHash.empty="\u2205";e2uHash.nabla="\u2207";e2uHash.isin="\u2208";e2uHash.notin="\u2209";e2uHash.ni="\u220B";e2uHash.prod="\u220F";e2uHash.sum="\u2211";e2uHash.minus="\u2212";e2uHash.lowast="\u2217";e2uHash.radic="\u221A";e2uHash.prop="\u221D";e2uHash.infin="\u221E";e2uHash.ang="\u2220";e2uHash.and="\u2227";e2uHash.or="\u2228";e2uHash.cap="\u2229";e2uHash.cup="\u222A";e2uHash["int"]="\u222B";e2uHash.there4="\u2234";e2uHash.sim="\u223C";e2uHash.cong="\u2245";e2uHash.asymp="\u2248";e2uHash.ne="\u2260";e2uHash.equiv="\u2261";e2uHash.le="\u2264";e2uHash.ge="\u2265";e2uHash.sub="\u2282";e2uHash.sup="\u2283";e2uHash.nsub="\u2284";e2uHash.sube="\u2286";e2uHash.supe="\u2287";e2uHash.oplus="\u2295";e2uHash.otimes="\u2297";e2uHash.perp="\u22A5";e2uHash.sdot="\u22C5";e2uHash.lceil="\u2308";e2uHash.rceil="\u2309";e2uHash.lfloor="\u230A";e2uHash.rfloor="\u230B";e2uHash.lang="\u2329";e2uHash.rang="\u232A";e2uHash.loz="\u25CA";e2uHash.spades="\u2660";e2uHash.clubs="\u2663";e2uHash.hearts="\u2665";e2uHash.diams="\u2666"})();Timeline.HTML.deEntify=function(C){e2uHash=Timeline.HTML._e2uHash;var B=/&(\w+?);/;while(B.test(C)){var A=C.match(B);C=C.replace(B,e2uHash[A[1]])}return C};Timeline.XmlHttp=new Object();Timeline.XmlHttp._onReadyStateChange=function(A,D,B){switch(A.readyState){case 4:try{if(A.status==0||A.status==200){if(B){B(A)}}else{if(D){D(A.statusText,A.status,A)}}}catch(C){Timeline.Debug.exception(C)}break}};Timeline.XmlHttp._createRequest=function(){if(Timeline.Platform.browser.isIE){var A=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];for(var B=0;B<A.length;B++){try{var C=A[B];var D=function(){return new ActiveXObject(C)};var F=D();Timeline.XmlHttp._createRequest=D;return F}catch(E){}}throw new Error("Failed to create an XMLHttpRequest object")}else{try{var D=function(){return new XMLHttpRequest()};var F=D();Timeline.XmlHttp._createRequest=D;return F}catch(E){throw new Error("Failed to create an XMLHttpRequest object")}}};Timeline.XmlHttp.get=function(A,D,C){var B=Timeline.XmlHttp._createRequest();B.open("GET",A,true);B.onreadystatechange=function(){Timeline.XmlHttp._onReadyStateChange(B,D,C)};B.send(null)};Timeline.XmlHttp.post=function(B,A,E,D){var C=Timeline.XmlHttp._createRequest();C.open("POST",B,true);C.onreadystatechange=function(){Timeline.XmlHttp._onReadyStateChange(C,E,D)};C.send(A)};Timeline.XmlHttp._forceXML=function(A){try{A.overrideMimeType("text/xml")}catch(B){A.setrequestheader("Content-Type","text/xml")}};Timeline.SpanHighlightDecorator=function(A){this._unit=("unit" in A)?A.unit:Timeline.NativeDateUnit;this._startDate=(typeof A.startDate=="string")?this._unit.parseFromObject(A.startDate):A.startDate;this._endDate=(typeof A.endDate=="string")?this._unit.parseFromObject(A.endDate):A.endDate;this._startLabel=A.startLabel;this._endLabel=A.endLabel;this._color=A.color;this._opacity=("opacity" in A)?A.opacity:100};Timeline.SpanHighlightDecorator.prototype.initialize=function(B,A){this._band=B;this._timeline=A;this._layerDiv=null};Timeline.SpanHighlightDecorator.prototype.paint=function(){if(this._layerDiv!=null){this._band.removeLayerDiv(this._layerDiv)}this._layerDiv=this._band.createLayerDiv(10);this._layerDiv.setAttribute("name","span-highlight-decorator");this._layerDiv.style.display="none";var E=this._band.getMinDate();var C=this._band.getMaxDate();if(this._unit.compare(this._startDate,C)<0&&this._unit.compare(this._endDate,E)>0){E=this._unit.later(E,this._startDate);C=this._unit.earlier(C,this._endDate);var D=this._band.dateToPixelOffset(E);var I=this._band.dateToPixelOffset(C);var G=this._timeline.getDocument();var F=function(){var J=G.createElement("table");J.insertRow(0).insertCell(0);return J};var B=G.createElement("div");B.style.position="absolute";B.style.overflow="hidden";B.style.background=this._color;if(this._opacity<100){Timeline.Graphics.setOpacity(B,this._opacity)}this._layerDiv.appendChild(B);var
 H=F();H.style.position="absolute";H.style.overflow="hidden";H.style.fontSize="300%";H.style.fontWeight="bold";H.style.color=this._color;H.rows[0].cells[0].innerHTML=this._startLabel;this._layerDiv.appendChild(H);var A=F();A.style.position="absolute";A.style.overflow="hidden";A.style.fontSize="300%";A.style.fontWeight="bold";A.style.color=this._color;A.rows[0].cells[0].innerHTML=this._endLabel;this._layerDiv.appendChild(A);if(this._timeline.isHorizontal()){B.style.left=D+"px";B.style.width=(I-D)+"px";B.style.top="0px";B.style.height="100%";H.style.right=(this._band.getTotalViewLength()-D)+"px";H.style.width=(this._startLabel.length)+"em";H.style.top="0px";H.style.height="100%";H.style.textAlign="right";A.style.left=I+"px";A.style.width=(this._endLabel.length)+"em";A.style.top="0px";A.style.height="100%"}else{B.style.top=D+"px";B.style.height=(I-D)+"px";B.style.left="0px";B.style.width="100%";H.style.bottom=D+"px";H.style.height="1.5px";H.style.left="0px";H.style.width="100%";A.style.top=I+"px";A.style.height="1.5px";A.style.left="0px";A.style.width="100%"}}this._layerDiv.style.display="block"};Timeline.SpanHighlightDecorator.prototype.softPaint=function(){};Timeline.PointHighlightDecorator=function(A){this._unit=("unit" in A)?A.unit:Timeline.NativeDateUnit;this._date=(typeof A.date=="string")?this._unit.parseFromObject(A.date):A.date;this._width=("width" in A)?A.width:10;this._color=A.color;this._opacity=("opacity" in A)?A.opacity:100};Timeline.PointHighlightDecorator.prototype.initialize=function(B,A){this._band=B;this._timeline=A;this._layerDiv=null};Timeline.PointHighlightDecorator.prototype.paint=function(){if(this._layerDiv!=null){this._band.removeLayerDiv(this._layerDiv)}this._layerDiv=this._band.createLayerDiv(10);this._layerDiv.setAttribute("name","span-highlight-decorator");this._layerDiv.style.display="none";var C=this._band.getMinDate();var E=this._band.getMaxDate();if(this._unit.compare(this._date,E)<0&&this._unit.compare(this._date,C)>0){var B=this._band.dateToPixelOffset(this._date);var A=B-Math.round(this._width/2);var D=this._timeline.getDocument();var F=D.createElement("div");F.style.position="absolute";F.style.overflow="hidden";F.style.background=this._color;if(this._opacity<100){Timeline.Graphics.setOpacity(F,this._opacity)}this._layerDiv.appendChild(F);if(this._timeline.isHorizontal()){F.style.left=A+"px";F.style.width=this._width+"px";F.style.top="0px";F.style.height="100%"}else{F.style.top=A+"px";F.style.height=this._width+"px";F.style.left="0px";F.style.width="100%"}}this._layerDiv.style.display="block"};Timeline.PointHighlightDecorator.prototype.softPaint=function(){};Timeline.GregorianEtherPainter=function(A){this._params=A;this._theme=A.theme;this._unit=A.unit;this._multiple=("multiple" in A)?A.multiple:1};Timeline.GregorianEtherPainter.prototype.initialize=function(C,B){this._band=C;this._timeline=B;this._backgroundLayer=C.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.style.background=this._theme.ether.backgroundColors[C.getIndex()];this._markerLayer=null;this._lineLayer=null;var D=("align" in this._params&&this._params.align!=undefined)?this._params.align:this._theme.ether.interval.marker[B.isHorizontal()?"hAlign":"vAlign"];var A=("showLine" in this._params)?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,D,A);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.GregorianEtherPainter.prototype.setHighlight=function(A,B){this._highlight.position(A,B)};Timeline.GregorianEtherPainter.prototype.paint=function(){if(this._markerLayer){this._band.removeLayerDiv(this._markerLayer)}this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";if(this._lineLayer){this._band.removeLayerDiv(this._lineLayer)}this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";var C=this._band.getMinDate();var F=this._band.getMaxDate();var B=this._band.getTimeZone();var E=this._band.getLabeller();Timeline.DateTime.roundDownToInterval(C,this._unit,B,this._multiple,this._theme.firstDayOfWeek);var D=this;var A=function(G){for(var H=0;H<D._multiple;H++){Timeline.DateTime.incrementByInterval(G,D._unit)}};while(C.getTime()<F.getTime()){this._intervalMarkerLayout.createIntervalMarker(C,E,this._unit,this._markerLayer,this._lineLayer);A(C)}this._markerLayer.style.display="block";this._lineLayer.style.display="block"};Timeline.GregorianEtherPainter.prototype.softPaint=function(){};Timeline.HotZoneGregorianEtherPainter=function(G){this._params=G;this._theme=G.theme;this._zones=[{startTime:Number.NEGATIVE_INFINITY,endTime:Number.POSITIVE_INFINITY,unit:G.unit,multiple:1}];for(var E=0;E<G.zones.length;E++){var B=G.zones[E];var D=Timeline.DateTime.parseGregorianDateTime(B.start).getTime();var F=Timeline.DateTime.parseGregorianDateTime(B.end).getTime();for(var C=0;C<this._zones.length&&F>D;C++){var A=this._zones[C];if(D<A.endTime){if(D>A.startTime){this._zones.splice(C,0,{startTime:A.startTime,endTime:D,unit:A.unit,multiple:A.multiple});C++;A.startTime=D}if(F<A.endTime){this._zones.splice(C,0,{startTime:D,endTime:F,unit:B.unit,multiple:(B.multiple)?B.multiple:1});C++;A.startTime=F;D=F}else{A.multiple=B.multiple;A.unit=B.unit;D=A.endTime}}}}};Timeline.HotZoneGregorianEtherPainter.prototype.initialize=function(C,B){this._band=C;this._timeline=B;this._backgroundLayer=C.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.style.background=this._theme.ether.backgroundColors[C.getIndex()];this._markerLayer=null;this._lineLayer=null;var D=("align" in this._params&&this._params.align!=undefined)?this._params.align:this._theme.ether.interval.marker[B.isHorizontal()?"hAlign":"vAlign"];var A=("showLine" in this._params)?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,D,A);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.HotZoneGregorianEtherPainter.prototype.setHighlight=function(A,B){this._highlight.position(A,B)};Timeline.HotZoneGregorianEtherPainter.prototype.paint=function(){if(this._markerLayer){this._band.removeLayerDiv(this._markerLayer)}this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";if(this._lineLayer){this._band.removeLayerDiv(this._lineLayer)}this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";var D=this._band.getMinDate();var A=this._band.getMaxDate();var K=this._band.getTimeZone();var I=this._band.getLabeller();var B=this;var L=function(N,M){for(var O=0;O<M.multiple;O++){Timeline.DateTime.incrementByInterval(N,M.unit)}};var C=0;while(C<this._zones.length){if(D.getTime()<this._zones[C].endTime){break}C++}var E=this._zones.length-1;while(E>=0){if(A.getTime()>this._zones[E].startTime){break}E--}for(var H=C;H<=E;H++){var G=this._zones[H];var J=new Date(Math.max(D.getTime(),G.startTime));var F=new Date(Math.min(A.getTime(),G.endTime));Timeline.DateTime.roundDownToInterval(J,G.unit,K,G.multiple,this._theme.firstDayOfWeek);Timeline.DateTime.roundUpToInterval(F,G.unit,K,G.multiple,this._theme.firstDayOfWeek);while(J.getTime()<F.getTime()){this._intervalMarkerLayout.createIntervalMarker(J,I,G.unit,this._markerLayer,this._lineLayer);L(J,G)}}this._markerLayer.style.display="block";this._lineLayer.style.display="block"};Timeline.HotZoneGregorianEtherPainter.prototype.softPaint=function(){};Timeline.YearCountEtherPainter=function(A){this._params=A;this._theme=A.theme;this._startDate=Timeline.DateTime.parseGregorianDateTime(A.startDate);this._multiple=("multiple" in A)?A.multiple:1};Timeline.YearCountEtherPainter.prototype.initialize=function(C,B){this._band=C;this._timeline=B;this._backgroundLayer=C.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.style.background=this._theme.ether.backgroundColors[C.getIndex()];this._markerLayer=null;this._lineLayer=null;var D=("align" in this._params)?this._params.align:this._theme.ether.interval.marker[B.isHorizontal()?"hAlign":"vAlign"];var A=("showLine" in this._params)?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,D,A);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.YearCountEtherPainter.prototype.setHighlight=function(A,B){this._highlight.position(A,B)};Timeline.YearCountEtherPainter.prototype.paint=function(){if(this._markerLayer){this._band.removeLayerDiv(this._markerLayer)}this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";if(this._lineLayer){this._band.removeLayerDiv(this._lineLayer)}this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";var B=new Date(this._startDate.getTime());var F=this._band.getMaxDate();var E=this._band.getMinDate().getUTCFullYear()-this._startDate.getUTCFullYear();B.setUTCFullYear(this._band.getMinDate().getUTCFullYear()-E%this._multiple);var C=this;var A=function(G){for(var H=0;H<C._multiple;H++){Timeline.DateTime.incrementByInterval(G,Timeline.DateTime.YEAR)}};var D={labelInterval:function(G,I){var H=G.getUTCFullYear()-C._startDate.getUTCFullYear();return{text:H,emphasized:H==0}}};while(B.getTime()<F.getTime()){this._intervalMarkerLayout.createIntervalMarker(B,D,Timeline.DateTime.YEAR
,this._markerLayer,this._lineLayer);A(B)}this._markerLayer.style.display="block";this._lineLayer.style.display="block"};Timeline.YearCountEtherPainter.prototype.softPaint=function(){};Timeline.QuarterlyEtherPainter=function(A){this._params=A;this._theme=A.theme;this._startDate=Timeline.DateTime.parseGregorianDateTime(A.startDate)};Timeline.QuarterlyEtherPainter.prototype.initialize=function(C,B){this._band=C;this._timeline=B;this._backgroundLayer=C.createLayerDiv(0);this._backgroundLayer.setAttribute("name","ether-background");this._backgroundLayer.style.background=this._theme.ether.backgroundColors[C.getIndex()];this._markerLayer=null;this._lineLayer=null;var D=("align" in this._params)?this._params.align:this._theme.ether.interval.marker[B.isHorizontal()?"hAlign":"vAlign"];var A=("showLine" in this._params)?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,D,A);this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)};Timeline.QuarterlyEtherPainter.prototype.setHighlight=function(A,B){this._highlight.position(A,B)};Timeline.QuarterlyEtherPainter.prototype.paint=function(){if(this._markerLayer){this._band.removeLayerDiv(this._markerLayer)}this._markerLayer=this._band.createLayerDiv(100);this._markerLayer.setAttribute("name","ether-markers");this._markerLayer.style.display="none";if(this._lineLayer){this._band.removeLayerDiv(this._lineLayer)}this._lineLayer=this._band.createLayerDiv(1);this._lineLayer.setAttribute("name","ether-lines");this._lineLayer.style.display="none";var B=new Date(0);var E=this._band.getMaxDate();B.setUTCFullYear(Math.max(this._startDate.getUTCFullYear(),this._band.getMinDate().getUTCFullYear()));B.setUTCMonth(this._startDate.getUTCMonth());var C=this;var A=function(F){F.setUTCMonth(F.getUTCMonth()+3)};var D={labelInterval:function(F,H){var G=(4+(F.getUTCMonth()-C._startDate.getUTCMonth())/3)%4;if(G!=0){return{text:"Q"+(G+1),emphasized:false}}else{return{text:"Y"+(F.getUTCFullYear()-C._startDate.getUTCFullYear()+1),emphasized:true}}}};while(B.getTime()<E.getTime()){this._intervalMarkerLayout.createIntervalMarker(B,D,Timeline.DateTime.YEAR,this._markerLayer,this._lineLayer);A(B)}this._markerLayer.style.display="block";this._lineLayer.style.display="block"};Timeline.QuarterlyEtherPainter.prototype.softPaint=function(){};Timeline.EtherIntervalMarkerLayout=function(M,L,C,E,H){var A=M.isHorizontal();if(A){if(E=="Top"){this.positionDiv=function(O,N){O.style.left=N+"px";O.style.top="0px"}}else{this.positionDiv=function(O,N){O.style.left=N+"px";O.style.bottom="0px"}}}else{if(E=="Left"){this.positionDiv=function(O,N){O.style.top=N+"px";O.style.left="0px"}}else{this.positionDiv=function(O,N){O.style.top=N+"px";O.style.right="0px"}}}var D=C.ether.interval.marker;var I=C.ether.interval.line;var B=C.ether.interval.weekend;var K=(A?"h":"v")+E;var G=D[K+"Styler"];var J=D[K+"EmphasizedStyler"];var F=Timeline.DateTime.gregorianUnitLengths[Timeline.DateTime.DAY];this.createIntervalMarker=function(T,a,b,c,Q){var U=Math.round(L.dateToPixelOffset(T));if(H&&b!=Timeline.DateTime.WEEK){var V=M.getDocument().createElement("div");V.style.position="absolute";if(I.opacity<100){Timeline.Graphics.setOpacity(V,I.opacity)}if(A){V.style.borderLeft="1px solid "+I.color;V.style.left=U+"px";V.style.width="1px";V.style.top="0px";V.style.height="100%"}else{V.style.borderTop="1px solid "+I.color;V.style.top=U+"px";V.style.height="1px";V.style.left="0px";V.style.width="100%"}Q.appendChild(V)}if(b==Timeline.DateTime.WEEK){var N=C.firstDayOfWeek;var W=new Date(T.getTime()+(6-N-7)*F);var Z=new Date(W.getTime()+2*F);var X=Math.round(L.dateToPixelOffset(W));var S=Math.round(L.dateToPixelOffset(Z));var R=Math.max(1,S-X);var P=M.getDocument().createElement("div");P.style.position="absolute";P.style.background=B.color;if(B.opacity<100){Timeline.Graphics.setOpacity(P,B.opacity)}if(A){P.style.left=X+"px";P.style.width=R+"px";P.style.top="0px";P.style.height="100%"}else{P.style.top=X+"px";P.style.height=R+"px";P.style.left="0px";P.style.width="100%"}Q.appendChild(P)}var Y=a.labelInterval(T,b);var O=M.getDocument().createElement("div");O.innerHTML=Y.text;O.style.position="absolute";(Y.emphasized?J:G)(O);this.positionDiv(O,U);c.appendChild(O);return O}};Timeline.EtherHighlight=function(C,E,D,B){var A=C.isHorizontal();this._highlightDiv=null;this._createHighlightDiv=function(){if(this._highlightDiv==null){this._highlightDiv=C.getDocument().createElement("div");this._highlightDiv.setAttribute("name","ether-highlight");this._highlightDiv.style.position="absolute";this._highlightDiv.style.background=D.ether.highlightColor;var F=D.ether.highlightOpacity;if(F<100){Timeline.Graphics.setOpacity(this._highlightDiv,F)}B.appendChild(this._highlightDiv)}};this.position=function(F,I){this._createHighlightDiv();var J=Math.round(E.dateToPixelOffset(F));var H=Math.round(E.dateToPixelOffset(I));var G=Math.max(H-J,3);if(A){this._highlightDiv.style.left=J+"px";this._highlightDiv.style.width=G+"px";this._highlightDiv.style.top="2px";this._highlightDiv.style.height=(E.getViewWidth()-4)+"px"}else{this._highlightDiv.style.top=J+"px";this._highlightDiv.style.height=G+"px";this._highlightDiv.style.left="2px";this._highlightDiv.style.width=(E.getViewWidth()-4)+"px"}}};Timeline.LinearEther=function(A){this._params=A;this._interval=A.interval;this._pixelsPerInterval=A.pixelsPerInterval};Timeline.LinearEther.prototype.initialize=function(A){this._timeline=A;this._unit=A.getUnit();if("startsOn" in this._params){this._start=this._unit.parseFromObject(this._params.startsOn)}else{if("endsOn" in this._params){this._start=this._unit.parseFromObject(this._params.endsOn);this.shiftPixels(-this._timeline.getPixelLength())}else{if("centersOn" in this._params){this._start=this._unit.parseFromObject(this._params.centersOn);this.shiftPixels(-this._timeline.getPixelLength()/2)}else{this._start=this._unit.makeDefaultValue();this.shiftPixels(-this._timeline.getPixelLength()/2)}}}};Timeline.LinearEther.prototype.setDate=function(A){this._start=this._unit.cloneValue(A)};Timeline.LinearEther.prototype.shiftPixels=function(B){var A=this._interval*B/this._pixelsPerInterval;this._start=this._unit.change(this._start,A)};Timeline.LinearEther.prototype.dateToPixelOffset=function(A){var B=this._unit.compare(A,this._start);return this._pixelsPerInterval*B/this._interval};Timeline.LinearEther.prototype.pixelOffsetToDate=function(B){var A=B*this._interval/this._pixelsPerInterval;return this._unit.change(this._start,A)};Timeline.HotZoneEther=function(A){this._params=A;this._interval=A.interval;this._pixelsPerInterval=A.pixelsPerInterval};Timeline.HotZoneEther.prototype.initialize=function(G){this._timeline=G;this._unit=G.getUnit();this._zones=[{startTime:Number.NEGATIVE_INFINITY,endTime:Number.POSITIVE_INFINITY,magnify:1}];var H=this._params;for(var E=0;E<H.zones.length;E++){var B=H.zones[E];var D=this._unit.parseFromObject(B.start);var F=this._unit.parseFromObject(B.end);for(var C=0;C<this._zones.length&&this._unit.compare(F,D)>0;C++){var A=this._zones[C];if(this._unit.compare(D,A.endTime)<0){if(this._unit.compare(D,A.startTime)>0){this._zones.splice(C,0,{startTime:A.startTime,endTime:D,magnify:A.magnify});C++;A.startTime=D}if(this._unit.compare(F,A.endTime)<0){this._zones.splice(C,0,{startTime:D,endTime:F,magnify:B.magnify*A.magnify});C++;A.startTime=F;D=F}else{A.magnify*=B.magnify;D=A.endTime}}}}if("startsOn" in this._params){this._start=this._unit.parseFromObject(this._params.startsOn)}else{if("endsOn" in this._params){this._start=this._unit.parseFromObject(this._params.endsOn);this.shiftPixels(-this._timeline.getPixelLength())}else{if("centersOn" in this._params){this._start=this._unit.parseFromObject(this._params.centersOn);this.shiftPixels(-this._timeline.getPixelLength()/2)}else{this._start=this._unit.makeDefaultValue();this.shiftPixels(-this._timeline.getPixelLength()/2)}}}};Timeline.HotZoneEther.prototype.setDate=function(A){this._start=this._unit.cloneValue(A)};Timeline.HotZoneEther.prototype.shiftPixels=function(A){this._start=this.pixelOffsetToDate(A)};Timeline.HotZoneEther.prototype.dateToPixelOffset=function(A){return this._dateDiffToPixelOffset(this._start,A)};Timeline.HotZoneEther.prototype.pixelOffsetToDate=function(A){return this._pixelOffsetToDate(A,this._start)};Timeline.HotZoneEther.prototype._dateDiffToPixelOffset=function(I,D){var B=this._getScale();var H=I;var C=D;var A=0;if(this._unit.compare(H,C)<0){var G=0;while(G<this._zones.length){if(this._unit.compare(H,this._zones[G].endTime)<0){break}G++}while(this._unit.compare(H,C)<0){var E=this._zones[G];var F=this._unit.earlier(C,E.endTime);A+=(this._unit.compare(F,H)/(B/E.magnify));H=F;G++}}else{var G=this._zones.length-1;while(G>=0){if(this._unit.compare(H,this._zones[G].startTime)>0){break}G--}while(this._unit.compare(H,C)>0){var E=this._zones[G];var F=this._unit.later(C,E.startTime);A+=(this._unit.compare(F,H)/(B/E.magnify));H=F;G--}}return A};Timeline.HotZoneEther.prototype._pixelOffsetToDate=function(H,C){var G=this._getScale();var E=C;if(H>0){var F=0;while(F<this._zones.length){if(this._unit.compare(E,this._zones[F].endTime)<0){break}F++}while(H>0){var A=this._zones[F];var D=G/A.magnify;if(A.endTime==Number.POSITIVE_INFINITY){E=this._unit.change(E,H*D);H=0}else{var B=this._unit.compare(A.endTime,E)/D;if(B>H){E=this._unit.change(E,H*D);H=0}else{E=A.endTime;H-=B}}F++}}else{var F=this._zones.length-1;while(F>=0){if(this._unit.compare(E,this._zones[F].startTime)>0){break}F--}H=-H;while(H>0){var A=this._zones[F];var D=G/A.magnify;if(A.startTime==Number.NEGATIVE_INFINITY){E=this._unit.change(E,-H*D);H=0}else{var B=this._unit.compare(E,A.startTime)/D;if(B>H){E=this._unit.change(E,-H*D);H=0}else{E=A.startTime;H-=B}}F--}}return E};Timeline.HotZoneEther.prototype._getScale=function(){return
 this._interval/this._pixelsPerInterval};Timeline.GregorianDateLabeller=function(A,B){this._locale=A;this._timeZone=B};Timeline.GregorianDateLabeller.monthNames=[];Timeline.GregorianDateLabeller.dayNames=[];Timeline.GregorianDateLabeller.labelIntervalFunctions=[];Timeline.GregorianDateLabeller.getMonthName=function(B,A){return Timeline.GregorianDateLabeller.monthNames[A][B]};Timeline.GregorianDateLabeller.prototype.labelInterval=function(A,C){var B=Timeline.GregorianDateLabeller.labelIntervalFunctions[this._locale];if(B==null){B=Timeline.GregorianDateLabeller.prototype.defaultLabelInterval}return B.call(this,A,C)};Timeline.GregorianDateLabeller.prototype.labelPrecise=function(A){return Timeline.DateTime.removeTimeZoneOffset(A,this._timeZone).toUTCString()};Timeline.GregorianDateLabeller.prototype.defaultLabelInterval=function(B,F){var C;var E=false;B=Timeline.DateTime.removeTimeZoneOffset(B,this._timeZone);switch(F){case Timeline.DateTime.MILLISECOND:C=B.getUTCMilliseconds();break;case Timeline.DateTime.SECOND:C=B.getUTCSeconds();break;case Timeline.DateTime.MINUTE:var A=B.getUTCMinutes();if(A==0){C=B.getUTCHours()+":00";E=true}else{C=A}break;case Timeline.DateTime.HOUR:C=B.getUTCHours()+"hr";break;case Timeline.DateTime.DAY:C=Timeline.GregorianDateLabeller.getMonthName(B.getUTCMonth(),this._locale)+" "+B.getUTCDate();break;case Timeline.DateTime.WEEK:C=Timeline.GregorianDateLabeller.getMonthName(B.getUTCMonth(),this._locale)+" "+B.getUTCDate();break;case Timeline.DateTime.MONTH:var A=B.getUTCMonth();if(A!=0){C=Timeline.GregorianDateLabeller.getMonthName(A,this._locale);break}case Timeline.DateTime.YEAR:case Timeline.DateTime.DECADE:case Timeline.DateTime.CENTURY:case Timeline.DateTime.MILLENNIUM:var D=B.getUTCFullYear();if(D>0){C=B.getUTCFullYear()}else{C=(1-D)+"BC"}E=(F==Timeline.DateTime.MONTH)||(F==Timeline.DateTime.DECADE&&D%100==0)||(F==Timeline.DateTime.CENTURY&&D%1000==0);break;default:C=B.toUTCString()}return{text:C,emphasized:E}};Timeline.StaticTrackBasedLayout=function(B){this._eventSource=B.eventSource;this._ether=B.ether;this._theme=B.theme;this._showText=("showText" in B)?B.showText:true;this._laidout=false;var A=this;if(this._eventSource!=null){this._eventSource.addListener({onAddMany:function(){A._laidout=false}})}};Timeline.StaticTrackBasedLayout.prototype.initialize=function(A){this._timeline=A};Timeline.StaticTrackBasedLayout.prototype.getTrack=function(A){if(!this._laidout){this._tracks=[];this._layout();this._laidout=true}return this._tracks[A.getID()]};Timeline.StaticTrackBasedLayout.prototype.getTrackCount=function(){if(!this._laidout){this._tracks=[];this._layout();this._laidout=true}return this._trackCount};Timeline.StaticTrackBasedLayout.prototype._layout=function(){if(this._eventSource==null){return }var J=[Number.NEGATIVE_INFINITY];var E=this;var F=this._showText;var C=this._theme;var I=C.event;var B=function(K,O,M,N){var L=O-1;if(K.isImprecise()){L=M}if(F){L=Math.max(L,O+I.label.width)}return L};var A=function(T,Q,K,N){if(T.isImprecise()){var M=T.getStart();var S=T.getEnd();var P=Math.round(E._ether.dateToPixelOffset(M));var R=Math.round(E._ether.dateToPixelOffset(S))}else{var P=Q;var R=K}var O=R;var L=Math.max(R-P,1);if(F){if(L<I.label.width){O=R+I.label.width}}return O};var G=function(L){var K=L.getStart();var O=L.getEnd();var Q=Math.round(E._ether.dateToPixelOffset(K));var M=Math.round(E._ether.dateToPixelOffset(O));var P=0;for(;P<J.length;P++){if(J[P]<Q){break}}if(P>=J.length){J.push(Number.NEGATIVE_INFINITY)}var N=(I.track.offset+P*(I.track.height+I.track.gap))+"em";E._tracks[L.getID()]=P;if(L.isInstant()){J[P]=B(L,Q,M,N)}else{J[P]=A(L,Q,M,N)}};var D=this._eventSource.getAllEventIterator();while(D.hasNext()){var H=D.next();G(H)}this._trackCount=J.length};Timeline.DurationEventPainter=function(A){this._params=A;this._theme=A.theme;this._layout=A.layout;this._showText=A.showText;this._showLineForNoText=("showLineForNoText" in A)?A.showLineForNoText:A.theme.event.instant.showLineForNoText;this._filterMatcher=null;this._highlightMatcher=null};Timeline.DurationEventPainter.prototype.initialize=function(B,A){this._band=B;this._timeline=A;this._layout.initialize(B,A);this._eventLayer=null;this._highlightLayer=null};Timeline.DurationEventPainter.prototype.getLayout=function(){return this._layout};Timeline.DurationEventPainter.prototype.setLayout=function(A){this._layout=A};Timeline.DurationEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher};Timeline.DurationEventPainter.prototype.setFilterMatcher=function(A){this._filterMatcher=A};Timeline.DurationEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher};Timeline.DurationEventPainter.prototype.setHighlightMatcher=function(A){this._highlightMatcher=A};Timeline.DurationEventPainter.prototype.paint=function(){var P=this._band.getEventSource();if(P==null){return }if(this._highlightLayer!=null){this._band.removeLayerDiv(this._highlightLayer)}this._highlightLayer=this._band.createLayerDiv(105);this._highlightLayer.setAttribute("name","event-highlights");this._highlightLayer.style.display="none";if(this._eventLayer!=null){this._band.removeLayerDiv(this._eventLayer)}this._eventLayer=this._band.createLayerDiv(110);this._eventLayer.setAttribute("name","events");this._eventLayer.style.display="none";var D=this._band.getMinDate();var F=this._band.getMaxDate();var V=this._timeline.getDocument();var K=this;var S=this._eventLayer;var E=this._highlightLayer;var A=this._showText;var T=this._params.theme;var O=T.event;var N=O.track.offset;var B=("trackHeight" in this._params)?this._params.trackHeight:O.track.height;var R=("trackGap" in this._params)?this._params.trackGap:O.track.gap;var C=function(W,Z){var Y=W.getIcon();var X=Timeline.Graphics.createTranslucentImage(V,Y!=null?Y:O.instant.icon);Z.appendChild(X);Z.style.cursor="pointer";Timeline.DOM.registerEvent(Z,"mousedown",function(a,b,c){K._onClickInstantEvent(X,b,W);Timeline.sendAjaxRequest(a,b,c)})};var Q=function(W,b,a,Z,Y){if(W>=0){var X=O.highlightColors[Math.min(W,O.highlightColors.length-1)];var c=V.createElement("div");c.style.position="absolute";c.style.overflow="hidden";c.style.left=(b-3)+"px";c.style.width=(a+6)+"px";c.style.top=Z+"em";c.style.height=Y+"em";c.style.background=X;E.appendChild(c)}};var L=function(j,e,W,c,b,i,h){if(j.isImprecise()){var a=Math.max(W-e,1);var Z=V.createElement("div");Z.style.position="absolute";Z.style.overflow="hidden";Z.style.top=c;Z.style.height=B+"em";Z.style.left=e+"px";Z.style.width=a+"px";Z.style.background=O.instant.impreciseColor;if(O.instant.impreciseOpacity<100){Timeline.Graphics.setOpacity(Z,O.instant.impreciseOpacity)}S.appendChild(Z)}var Y=V.createElement("div");Y.style.position="absolute";Y.style.overflow="hidden";S.appendChild(Y);var g=j.getTextColor();var X=j.getColor();var d=-8;var a=16;if(A){Y.style.width=O.label.width+"px";Y.style.color=g!=null?g:O.label.outsideColor;C(j,Y);Y.appendChild(V.createTextNode(j.getText()))}else{if(K._showLineForNoText){Y.style.width="1px";Y.style.borderLeft="1px solid "+(X!=null?X:O.instant.lineColor);d=0;a=1}else{C(j,Y)}}Y.style.top=c;Y.style.height=B+"em";Y.style.left=(e+d)+"px";Q(b,(e+d),a,i,h)};var G=function(g,Z,W,c,h,l,Y){var n=function(q){q.style.cursor="pointer";Timeline.DOM.registerEvent(q,"mousedown",function(r,s,t){K._onClickDurationEvent(s,g,t)})};var b=Math.max(W-Z,1);if(g.isImprecise()){var e=V.createElement("div");e.style.position="absolute";e.style.overflow="hidden";e.style.top=c;e.style.height=B+"em";e.style.left=Z+"px";e.style.width=b+"px";e.style.background=O.duration.impreciseColor;if(O.duration.impreciseOpacity<100){Timeline.Graphics.setOpacity(e,O.duration.impreciseOpacity)}S.appendChild(e);var a=g.getLatestStart();var j=g.getEarliestEnd();var d=Math.round(K._band.dateToPixelOffset(a));var p=Math.round(K._band.dateToPixelOffset(j))}else{var d=Z;var p=W}var X=g.getTextColor();var o=true;if(d<=p){b=Math.max(p-d,1);o=!(b>O.label.width);e=V.createElement("div");e.style.position="absolute";e.style.overflow="hidden";e.style.top=c;e.style.height=B+"em";e.style.left=d+"px";e.style.width=b+"px";var k=g.getColor();e.style.background=k!=null?k:O.duration.color;if(O.duration.opacity<100){Timeline.Graphics.setOpacity(e,O.duration.opacity)}S.appendChild(e)}else{var m=d;d=p;p=m}if(e==null){console.log(g)}n(e);if(A){var i=V.createElement("div");i.style.position="absolute";i.style.top=c;i.style.height=B+"em";i.style.left=((b>O.label.width)?d:p)+"px";i.style.width=O.label.width+"px";i.style.color=X!=null?X:(o?O.label.outsideColor:O.label.insideColor);i.style.overflow="hidden";i.appendChild(V.createTextNode(g.getText()));S.appendChild(i);n(i)}Q(h,Z,W-Z,l,Y)};var M=function(Y,X){var W=Y.getStart();var b=Y.getEnd();var c=Math.round(K._band.dateToPixelOffset(W));var Z=Math.round(K._band.dateToPixelOffset(b));var a=(N+K._layout.getTrack(Y)*(B+R));if(Y.isInstant()){L(Y,c,Z,a+"em",X,a-R,B+2*R)}else{G(Y,c,Z,a+"em",X,a-R,B+2*R)}};var U=(this._filterMatcher!=null)?this._filterMatcher:function(W){return true};var I=(this._highlightMatcher!=null)?this._highlightMatcher:function(W){return -1};var J=P.getEventIterator(D,F);while(J.hasNext()){var H=J.next();if(U(H)){M(H,I(H))}}this._highlightLayer.style.display="block";this._eventLayer.style.display="block"};Timeline.DurationEventPainter.prototype.softPaint=function(){};Timeline.DurationEventPainter.prototype._onClickInstantEvent=function(B,C,A){C.cancelBubble=true;var D=Timeline.DOM.getPageCoordinates(B);this._showBubble(D.left+Math.ceil(B.offsetWidth/2),D.top+Math.ceil(B.offsetHeight/2),A)};Timeline.DurationEventPainter.prototype._onClickDurationEvent=function(C,B,D){C.cancelBubble=true;if("pageX" in C){var A=C.pageX;var F=C.pageY}else{var E=Timeline.DOM.getPageCoordinates(D);var A=C.offsetX+E.left;var F=C.offsetY+E.top}this._showBubble(A,F,B)};Timeline.DurationEventPainter.prototype._showBubble=function(A,D,B){var C=this._band.openBubbleForPoint(A,D,this._theme.event.bubble.width,this._theme.event.bubble.height);B.
fillInfoBubble(C,this._theme,this._band.getLabeller())};Timeline.DefaultEventSource=function(A){this._events=(A instanceof Object)?A:new Timeline.EventIndex();this._listeners=[]};Timeline.DefaultEventSource.prototype.addListener=function(A){this._listeners.push(A)};Timeline.DefaultEventSource.prototype.removeListener=function(B){for(var A=0;A<this._listeners.length;A++){if(this._listeners[A]==B){this._listeners.splice(A,1);break}}};Timeline.DefaultEventSource.prototype.loadXML=function(F,A){var B=this._getBaseURL(A);var G=F.documentElement.getAttribute("wiki-url");var K=F.documentElement.getAttribute("wiki-section");var D=F.documentElement.getAttribute("date-time-format");var E=this._events.getUnit().getParser(D);var C=F.documentElement.firstChild;var H=false;while(C!=null){if(C.nodeType==1){var J="";if(C.firstChild!=null&&C.firstChild.nodeType==3){J=C.firstChild.nodeValue}var I=new Timeline.DefaultEventSource.Event(E(C.getAttribute("start")),E(C.getAttribute("end")),E(C.getAttribute("latestStart")),E(C.getAttribute("earliestEnd")),C.getAttribute("isDuration")!="true",C.getAttribute("title"),J,this._resolveRelativeURL(C.getAttribute("image"),B),this._resolveRelativeURL(C.getAttribute("link"),B),this._resolveRelativeURL(C.getAttribute("icon"),B),C.getAttribute("color"),C.getAttribute("textColor"));I._node=C;I.getProperty=function(L){return this._node.getAttribute(L)};I.setWikiInfo(G,K);this._events.add(I);H=true}C=C.nextSibling}if(H){this._fire("onAddMany",[])}};Timeline.DefaultEventSource.prototype.loadJSON=function(F,B){var C=this._getBaseURL(B);var I=false;if(F&&F.events){var H=("wikiURL" in F)?F.wikiURL:null;var K=("wikiSection" in F)?F.wikiSection:null;var D=("dateTimeFormat" in F)?F.dateTimeFormat:null;var G=this._events.getUnit().getParser(D);for(var E=0;E<F.events.length;E++){var A=F.events[E];var J=new Timeline.DefaultEventSource.Event(G(A.start),G(A.end),G(A.latestStart),G(A.earliestEnd),A.isDuration||false,A.title,A.description,this._resolveRelativeURL(A.image,C),this._resolveRelativeURL(A.link,C),this._resolveRelativeURL(A.icon,C),A.color,A.textColor);J._obj=A;J.getProperty=function(L){return this._obj[L]};J.setWikiInfo(H,K);this._events.add(J);I=true}}if(I){this._fire("onAddMany",[])}};Timeline.DefaultEventSource.prototype.loadSPARQL=function(G,A){var C=this._getBaseURL(A);var E="iso8601";var F=this._events.getUnit().getParser(E);if(G==null){return }var D=G.documentElement.firstChild;while(D!=null&&(D.nodeType!=1||D.nodeName!="results")){D=D.nextSibling}var I=null;var L=null;if(D!=null){I=D.getAttribute("wiki-url");L=D.getAttribute("wiki-section");D=D.firstChild}var J=false;while(D!=null){if(D.nodeType==1){var B={};var H=D.firstChild;while(H!=null){if(H.nodeType==1&&H.firstChild!=null&&H.firstChild.nodeType==1&&H.firstChild.firstChild!=null&&H.firstChild.firstChild.nodeType==3){B[H.getAttribute("name")]=H.firstChild.firstChild.nodeValue}H=H.nextSibling}if(B.start==null&&B.date!=null){B.start=B.date}var K=new Timeline.DefaultEventSource.Event(F(B.start),F(B.end),F(B.latestStart),F(B.earliestEnd),B.isDuration!="true",B.title,B.description,this._resolveRelativeURL(B.image,C),this._resolveRelativeURL(B.link,C),this._resolveRelativeURL(B.icon,C),B.color,B.textColor);K._bindings=B;K.getProperty=function(M){return this._bindings[M]};K.setWikiInfo(I,L);this._events.add(K);J=true}D=D.nextSibling}if(J){this._fire("onAddMany",[])}};Timeline.DefaultEventSource.prototype.add=function(A){this._events.add(A);this._fire("onAddOne",[A])};Timeline.DefaultEventSource.prototype.addMany=function(B){for(var A=0;A<B.length;A++){this._events.add(B[A])}this._fire("onAddMany",[])};Timeline.DefaultEventSource.prototype.clear=function(){this._events.removeAll();this._fire("onClear",[])};Timeline.DefaultEventSource.prototype.getEventIterator=function(A,B){return this._events.getIterator(A,B)};Timeline.DefaultEventSource.prototype.getAllEventIterator=function(){return this._events.getAllIterator()};Timeline.DefaultEventSource.prototype.getCount=function(){return this._events.getCount()};Timeline.DefaultEventSource.prototype.getEarliestDate=function(){return this._events.getEarliestDate()};Timeline.DefaultEventSource.prototype.getLatestDate=function(){return this._events.getLatestDate()};Timeline.DefaultEventSource.prototype._fire=function(B,A){for(var C=0;C<this._listeners.length;C++){var D=this._listeners[C];if(B in D){try{D[B].apply(D,A)}catch(E){Timeline.Debug.exception(E)}}}};Timeline.DefaultEventSource.prototype._getBaseURL=function(A){if(A.indexOf("://")<0){var C=this._getBaseURL(document.location.href);if(A.substr(0,1)=="/"){A=C.substr(0,C.indexOf("/",C.indexOf("://")+3))+A}else{A=C+A}}var B=A.lastIndexOf("/");if(B<0){return""}else{return A.substr(0,B+1)}};Timeline.DefaultEventSource.prototype._resolveRelativeURL=function(A,B){if(A==null||A==""){return A}else{if(A.indexOf("://")>0){return A}else{if(A.substr(0,1)=="/"){return B.substr(0,B.indexOf("/",B.indexOf("://")+3))+A}else{return B+A}}}};Timeline.DefaultEventSource.Event=function(A,E,G,F,B,L,K,C,I,H,D,J){this._id="e"+Math.floor(Math.random()*1000000);this._instant=B||(E==null);this._start=A;this._end=(E!=null)?E:A;this._latestStart=(G!=null)?G:(B?this._end:this._start);this._earliestEnd=(F!=null)?F:(B?this._start:this._end);this._text=Timeline.HTML.deEntify(L);this._description=Timeline.HTML.deEntify(K);this._image=(C!=null&&C!="")?C:null;this._link=(I!=null&&I!="")?I:null;this._icon=(H!=null&&H!="")?H:null;this._color=(D!=null&&D!="")?D:null;this._textColor=(J!=null&&J!="")?J:null;this._wikiURL=null;this._wikiSection=null};Timeline.DefaultEventSource.Event.prototype={getID:function(){return this._id},isInstant:function(){return this._instant},isImprecise:function(){return this._start!=this._latestStart||this._end!=this._earliestEnd},getStart:function(){return this._start},getEnd:function(){return this._end},getLatestStart:function(){return this._latestStart},getEarliestEnd:function(){return this._earliestEnd},getText:function(){return this._text},getDescription:function(){return this._description},getImage:function(){return this._image},getLink:function(){return this._link},getIcon:function(){return this._icon},getColor:function(){return this._color},getTextColor:function(){return this._textColor},getProperty:function(A){return null},getWikiURL:function(){return this._wikiURL},getWikiSection:function(){return this._wikiSection},setWikiInfo:function(B,A){this._wikiURL=B;this._wikiSection=A},fillDescription:function(A){A.innerHTML=this._description},fillWikiInfo:function(D){if(this._wikiURL!=null&&this._wikiSection!=null){var C=this.getProperty("wikiID");if(C==null||C.length==0){C=this.getText()}C=C.replace(/\s/g,"_");var B=this._wikiURL+this._wikiSection.replace(/\s/g,"_")+"/"+C;var A=document.createElement("a");A.href=B;A.target="new";A.innerHTML=Timeline.strings[Timeline.Platform.clientLocale].wikiLinkLabel;D.appendChild(document.createTextNode("["));D.appendChild(A);D.appendChild(document.createTextNode("]"))}else{D.style.display="none"}},fillTime:function(A,B){if(this._instant){if(this.isImprecise()){A.appendChild(A.ownerDocument.createTextNode(B.labelPrecise(this._start)));A.appendChild(A.ownerDocument.createElement("br"));A.appendChild(A.ownerDocument.createTextNode(B.labelPrecise(this._end)))}else{A.appendChild(A.ownerDocument.createTextNode(B.labelPrecise(this._start)))}}else{if(this.isImprecise()){A.appendChild(A.ownerDocument.createTextNode(B.labelPrecise(this._start)+" ~ "+B.labelPrecise(this._latestStart)));A.appendChild(A.ownerDocument.createElement("br"));A.appendChild(A.ownerDocument.createTextNode(B.labelPrecise(this._earliestEnd)+" ~ "+B.labelPrecise(this._end)))}else{A.appendChild(A.ownerDocument.createTextNode(B.labelPrecise(this._start)));A.appendChild(A.ownerDocument.createElement("br"));A.appendChild(A.ownerDocument.createTextNode(B.labelPrecise(this._end)))}}},fillInfoBubble:function(A,D,K){var L=A.ownerDocument;var J=this.getText();var H=this.getLink();var C=this.getImage();if(C!=null){var E=L.createElement("img");E.src=C;D.event.bubble.imageStyler(E);A.appendChild(E)}var M=L.createElement("div");var B=L.createTextNode(J);if(H!=null){var I=L.createElement("a");I.href=H;I.appendChild(B);M.appendChild(I)}else{M.appendChild(B)}D.event.bubble.titleStyler(M);A.appendChild(M);var N=L.createElement("div");this.fillDescription(N);D.event.bubble.bodyStyler(N);A.appendChild(N);var G=L.createElement("div");this.fillTime(G,K);D.event.bubble.timeStyler(G);A.appendChild(G);var F=L.createElement("div");this.fillWikiInfo(F);D.event.bubble.wikiStyler(F);A.appendChild(F)}};Timeline.ClassicTheme=new Object();Timeline.ClassicTheme.implementations=[];Timeline.ClassicTheme.create=function(A){if(A==null){A=Timeline.Platform.getDefaultLocale()}var B=Timeline.ClassicTheme.implementations[A];if(B==null){B=Timeline.ClassicTheme._Impl}return new B()};Timeline.ClassicTheme._Impl=function(){this.firstDayOfWeek=0;this.ether={backgroundColors:["#EEE","#DDD","#CCC","#AAA"],highlightColor:"white",highlightOpacity:50,interval:{line:{show:true,color:"#aaa",opacity:25},weekend:{color:"#FFFFE0",opacity:30},marker:{hAlign:"Bottom",hBottomStyler:function(A){A.className="timeline-ether-marker-bottom"},hBottomEmphasizedStyler:function(A){A.className="timeline-ether-marker-bottom-emphasized"},hTopStyler:function(A){A.className="timeline-ether-marker-top"},hTopEmphasizedStyler:function(A){A.className="timeline-ether-marker-top-emphasized"},vAlign:"Right",vRightStyler:function(A){A.className="timeline-ether-marker-right"},vRightEmphasizedStyler:function(A){A.className="timeline-ether-marker-right-emphasized"},vLeftStyler:function(A){A.className="timeline-ether-marker-left"},vLeftEmphasizedStyler:function(A){A.className="timeline-ether-marker-left-emphasized"}}}};this.event={track:{offset:0.5,height:1.5,gap:0.5},instant:{icon:Timeline.urlPrefix+"images/dull-blue-circle.png",lineColor:"#58A0DC",impreciseColor:"#58A0DC",impreciseOpacity:20,showLineForNoText:true},duration:{color:"#58A0DC"
,opacity:100,impreciseColor:"#58A0DC",impreciseOpacity:20},label:{insideColor:"white",outsideColor:"black",width:200},highlightColors:["#FFFF00","#FFC000","#FF0000","#0000FF"],bubble:{width:250,height:125,titleStyler:function(A){A.className="timeline-event-bubble-title"},bodyStyler:function(A){A.className="timeline-event-bubble-body"},imageStyler:function(A){A.className="timeline-event-bubble-image"},wikiStyler:function(A){A.className="timeline-event-bubble-wiki"},timeStyler:function(A){A.className="timeline-event-bubble-time"}}}};Timeline.NativeDateUnit=new Object();Timeline.NativeDateUnit.createLabeller=function(A,B){return new Timeline.GregorianDateLabeller(A,B)};Timeline.NativeDateUnit.makeDefaultValue=function(){return new Date()};Timeline.NativeDateUnit.cloneValue=function(A){return new Date(A.getTime())};Timeline.NativeDateUnit.getParser=function(A){if(typeof A=="string"){A=A.toLowerCase()}return(A=="iso8601"||A=="iso 8601")?Timeline.DateTime.parseIso8601DateTime:Timeline.DateTime.parseGregorianDateTime};Timeline.NativeDateUnit.parseFromObject=function(A){return Timeline.DateTime.parseGregorianDateTime(A)};Timeline.NativeDateUnit.toNumber=function(A){return A.getTime()};Timeline.NativeDateUnit.fromNumber=function(A){return new Date(A)};Timeline.NativeDateUnit.compare=function(D,C){var B,A;if(typeof D=="object"){B=D.getTime()}else{B=Number(D)}if(typeof C=="object"){A=C.getTime()}else{A=Number(C)}return B-A};Timeline.NativeDateUnit.earlier=function(B,A){return Timeline.NativeDateUnit.compare(B,A)<0?B:A};Timeline.NativeDateUnit.later=function(B,A){return Timeline.NativeDateUnit.compare(B,A)>0?B:A};Timeline.NativeDateUnit.change=function(A,B){return new Date(A.getTime()+B)};Timeline.strings.en={wikiLinkLabel:"Discuss"};Timeline.GregorianDateLabeller.monthNames.en=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Timeline.strings.fr={wikiLinkLabel:"Discute"};Timeline.GregorianDateLabeller.monthNames.fr=["jan","fev","mar","avr","mai","jui","jui","aou","sep","oct","nov","dec"];Timeline.OLanceTheme=Timeline.ClassicTheme;Timeline.OLanceTheme._Impl=function(){this.firstDayOfWeek=0;this.ether={backgroundColors:["#f6fbfe","#e6ebed","#CCC","#AAA"],highlightColor:"#f6fbfe",highlightOpacity:50,interval:{line:{show:true,color:"#90a2b3",opacity:25},weekend:{color:"#FFFFE0",opacity:30},marker:{hAlign:"Bottom",hBottomStyler:function(A){A.className="timeline-ether-marker-bottom"},hBottomEmphasizedStyler:function(A){A.className="timeline-ether-marker-bottom-emphasized"},hTopStyler:function(A){A.className="timeline-ether-marker-top"},hTopEmphasizedStyler:function(A){A.className="timeline-ether-marker-top-emphasized"},vAlign:"Right",vRightStyler:function(A){A.className="timeline-ether-marker-right"},vRightEmphasizedStyler:function(A){A.className="timeline-ether-marker-right-emphasized"},vLeftStyler:function(A){A.className="timeline-ether-marker-left"},vLeftEmphasizedStyler:function(A){A.className="timeline-ether-marker-left-emphasized"}}}};this.event={track:{offset:0.5,height:1.5,gap:0.5},instant:{icon:Timeline.urlPrefix+"images/dull-blue-circle.png",lineColor:"#58A0DC",impreciseColor:"#58A0DC",impreciseOpacity:20,showLineForNoText:true},duration:{color:"#b4daff",opacity:100,impreciseColor:"#58A0DC",impreciseOpacity:20},label:{insideColor:"white",outsideColor:"black",width:200},highlightColors:["#FFFF00","#FFC000","#FF0000","#0000FF"],bubble:{width:300,height:250,titleStyler:function(A){A.className="timeline-event-bubble-title"},bodyStyler:function(A){A.className="timeline-event-bubble-body"},imageStyler:function(A){A.className="timeline-event-bubble-image"},wikiStyler:function(A){A.className="timeline-event-bubble-wiki"},timeStyler:function(A){A.className="timeline-event-bubble-time"}}}};function JSSlider(){this._id=undefined;this._horizontalLayout=undefined;this._startPercent=undefined;this._endPercent=undefined;this._rangeSlider=undefined;this._numTicks=undefined;this._widgetWidth=undefined;this._widgetHeight=undefined;this._customImage=undefined;this._changeListener=undefined;this._trackHidden=false;var A="resource.jsf?r=/org/mapfaces/resources/timeline/slider/js/sliderimages";this._MaxVal=100;this._spacerImage=A+"/spacer.gif";this._ticksThickness=4;this._ticksMargin=3;this._tickColor="#B7B6B3";this._widgetMargin=3;this._ticksBeforeTrack=true;this._horizontalMarkerImage=A+"/slider-marker-h-point.gif";this._horizontalMarkerWidth=11;this._horizontalMarkerHeight=12;this._verticalMarkerImage=A+"/slider-marker-v-point.gif";this._verticalMarkerWidth=12;this._verticalMarkerHeight=11;this._trackImageDimension=6;this._horizontalTrackStartImage=A+"/slider-track-h-start.gif";this._horizontalTrackMidImage=A+"/slider-track-h-mid.gif";this._horizontalTrackEndImage=A+"/slider-track-h-end.gif";this._horizontalTrackRangeImage=A+"/slider-track-h-range.gif";this._verticalTrackStartImage=A+"/slider-track-v-start.gif";this._verticalTrackMidImage=A+"/slider-track-v-mid.gif";this._verticalTrackEndImage=A+"/slider-track-v-end.gif";this._verticalTrackRangeImage=A+"/Slider/slider-track-v-range.gif";this._dragInProgress=false;this._dragX=undefined;this._dragY=undefined;this._dragLeft=undefined;this._dragTop=undefined;this._dragElement=undefined;this._oldOnmousemove=undefined;this._oldOnmouseup=undefined}JSSlider.getInstance=function(B,H,I,G,A,D,J,F,E){var C=new JSSlider();C._id=B;C._horizontalLayout=H;C._numTicks=I;C._startPercent=A;C._endPercent=D;C._rangeSlider=(D!=null);C._customImage=J;C._changeListener=F;C._trackHidden=E;if(C._rangeSlider&&(D<A)){C._endPercent=A}C._initializeWidgetDimensions(G);window[B]=C;return C};JSSlider.prototype.render=function(){var B=new DhtmlStringBuffer();this._appendTickMarks(B);if(!this._trackHidden){this._appendTrackOutline(B)}this._appendMarker(B,this._startPercent,this._id+JSSlider._ID_START_MARKER);if(this._endPercent){this._appendMarker(B,this._endPercent,this._id+JSSlider._ID_END_MARKER)}var A=document.createElement("div");A.id=this._id+JSSlider._ID_WIDGET;A.style.position="relative";A.style.width=this._widgetWidth+"px";A.style.height=this._widgetHeight+"px";A.innerHTML=B.toString();return A};JSSlider.prototype.destroy=function(){window[this._id]=undefined;var A=document.getElementById(this._id+JSSlider._ID_WIDGET);if(A!=null){A.style.display="none";var B=A.parentNode;if(B!=null){B.removeChild(A)}}};JSSlider.prototype.setMarkerPercent=function(E,C,I){var A=E;var D=C;if(this._rangeSlider&&(D!=null)&&(D<A)){A=C;D=E}this._startPercent=A;var H=this._getMarkerTop(this._startPercent);var B=this._getMarkerLeft(this._startPercent);var F=document.getElementById(this._id+JSSlider._ID_START_MARKER);F.style.top=H+"px";F.style.left=B+"px";if(this._rangeSlider&&(D!=null)){this._endPercent=D;H=this._getMarkerTop(this._endPercent);B=this._getMarkerLeft(this._endPercent);var G=document.getElementById(this._id+JSSlider._ID_END_MARKER);G.style.top=H+"px";G.style.left=B+"px"}if(this._rangeSlider){this._repositionRangeBar()}if(I){this._broadcastPositionChange()}};JSSlider.prototype.markerKeyDown=function(E,A){var G=false;var L=A.keyCode?A.keyCode:A.which?A.which:A.charCode;var D,K;var J=1;var F=true;if(this._rangeSlider){if(E.id.indexOf(JSSlider._ID_START_MARKER)==-1){F=false}}if(this._horizontalLayout){if(document.documentElement.dir=="rtl"){D=JSSlider._KEY_CODE_ARROW_RIGHT;K=JSSlider._KEY_CODE_ARROW_LEFT}else{D=JSSlider._KEY_CODE_ARROW_LEFT;K=JSSlider._KEY_CODE_ARROW_RIGHT}}else{D=JSSlider._KEY_CODE_ARROW_DOWN;K=JSSlider._KEY_CODE_ARROW_UP}switch(L){case D:var B=this._startPercent;var C=this._endPercent;var I=B;var H=C;if(F||!this._rangeSlider){I=Math.max(0,I-J)}else{if(H-J<I){I=Math.max(0,I-J);document.getElementById(this._id+JSSlider._ID_START_MARKER).focus()}else{H=Math.max(0,H-J)}}this.setMarkerPercent(I,H,true);G=true;break;case K:var B=this._startPercent;var C=this._endPercent;var I=B;var H=C;if(F||!this._rangeSlider){if(this._rangeSlider&&(I+J>H)){H=Math.min(100,H+J);document.getElementById(this._id+JSSlider._ID_END_MARKER).focus()}else{I=Math.min(100,I+J)}}else{H=Math.min(100,H+J)}this.setMarkerPercent(I,H,true);G=true;break}if(G){if(A.cancelable){A.stopPropagation();A.preventDefault()}return false}return true};JSSlider.prototype.markerDragged=function(A,B){this._dragInProgress=true;this._dragX=B.clientX;this._dragY=B.clientY;this._dragLeft=parseInt(A.style.left);this._dragTop=parseInt(A.style.top);this._dragElement=A;A.focus();if(document.all){A.setCapture()}else{JSSlider.prototype.currentInstance=this;window.sliderEventId=this._id;window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);this._oldOnmousemove=document.onmousemove;document.onmousemove=this.markerMoved;this._oldOnmouseup=document.onmouseup;document.onmouseup=this.markerReleased;if(B.cancelable){B.stopPropagation();B.preventDefault()}}return false};JSSlider.prototype.markerMoved=function(B){var C=this;if(!document.all){C=JSSlider.prototype.currentInstance}var A=C._dragElement;if(C._dragInProgress){if(C._horizontalLayout){A.style.left=C._ensureMarkerLeftInRange(C._dragLeft+B.clientX-C._dragX)+"px"}else{A.style.top=C._ensureMarkerTopInRange(C._dragTop+B.clientY-C._dragY)+"px"}if(B.cancelable){B.stopPropagation();B.preventDefault()}C._recalculatePercentages();C._broadcastPositionChange();return false}};JSSlider.prototype.markerReleased=function(B){var C=this;if(!document.all){C=JSSlider.prototype.currentInstance}if(document.all){C._dragElement.releaseCapture()}else{window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP);document.onmousemove=C._oldOnmousemove;document.onmouseup=C._oldOnmouseup}var A=C._dragElement.id;C._dragElement=undefined;C._dragX=undefined;C._dragY=undefined;C._dragLeft=undefined;C._dragTop=undefined;if(!document.all){JSSlider.prototype.currentInstance=false}C._dragInProgress=false;if(B.cancelable){B.stopPropagation();B.preventDefault()}C._correctMarkerOrdering(A)};JSSlider.prototype._correctMarkerOrdering=function(C){if(this._rangeSlider){var
 J=this._id+JSSlider._ID_START_MARKER;var G=this._id+JSSlider._ID_END_MARKER;var H=document.getElementById(J);var I=document.getElementById(G);var D=false;if(this._horizontalLayout){var B=parseInt(H.style.left);var E=parseInt(I.style.left);if(E<B){D=true}}else{var F=parseInt(H.style.top);var A=parseInt(I.style.top);if(A>F){D=true}}if(D){this.setMarkerPercent(this._startPercent,this._endPercent,false);if(C==J){I.focus()}else{H.focus()}}}};JSSlider.prototype._recalculatePercentages=function(){var B,A,D,C,E;if(this._horizontalLayout){B=this._widgetMargin+this._trackImageDimension;A=this._widgetWidth-B;D=A-B;C=(parseInt(document.getElementById(this._id+JSSlider._ID_START_MARKER).style.left)-B+Math.floor(0.5*this._horizontalMarkerWidth))*100/D;if(this._rangeSlider){E=(parseInt(document.getElementById(this._id+JSSlider._ID_END_MARKER).style.left)-B+Math.floor(0.5*this._horizontalMarkerWidth))*100/D}}else{B=this._widgetMargin+this._trackImageDimension;A=this._widgetHeight-B;D=A-B;C=100-100*(parseInt(document.getElementById(this._id+JSSlider._ID_START_MARKER).style.top)-B+Math.floor(0.5*this._verticalMarkerHeight))/D;if(this._rangeSlider){E=100-100*(parseInt(document.getElementById(this._id+JSSlider._ID_END_MARKER).style.top)-B+Math.floor(0.5*this._verticalMarkerHeight))/D}}if(this._rangeSlider){if(C>E){var F=C;C=E;E=F}}this._startPercent=C;this._endPercent=E;this._repositionRangeBar()};JSSlider.prototype._repositionRangeBar=function(){if(this._rangeSlider){var A=document.getElementById(this._id+JSSlider._ID_RANGE_BAR);var B=this._getRangeBarStartAndSize();if(this._horizontalLayout){A.style.left=B.start+"px";A.style.width=B.size+"px"}else{A.style.top=B.start+"px";A.style.height=B.size+"px"}}};JSSlider.prototype._broadcastPositionChange=function(){if(this._changeListener){try{eval(this._changeListener+"("+this._startPercent+","+this._endPercent+")",1)}catch(problem){}}};JSSlider.prototype._initializeWidgetDimensions=function(A){var B=2*this._widgetMargin+this._trackImageDimension;if((this._numTicks>0)||(this._customImage!=null)){B+=this._ticksThickness+this._ticksMargin}if(this._horizontalLayout){this._widgetWidth=A;this._widgetHeight=B}else{this._widgetWidth=B;this._widgetHeight=A}};JSSlider.prototype._getMinimumMarkerHorizontalLeft=function(){var A=this._widgetMargin+this._trackImageDimension-Math.floor(0.5*this._horizontalMarkerWidth);return A};JSSlider.prototype._getMaximumMarkerHorizontalLeft=function(){var A=this._widgetWidth-this._widgetMargin-this._trackImageDimension-Math.floor(0.5*this._horizontalMarkerWidth);return A};JSSlider.prototype._getMinimumMarkerVerticalTop=function(){var A=this._widgetMargin+this._trackImageDimension-Math.floor(0.5*this._verticalMarkerHeight);return A};JSSlider.prototype._getMaximumMarkerVerticalTop=function(){var A=this._widgetHeight-this._widgetMargin-this._trackImageDimension-Math.floor(0.5*this._verticalMarkerHeight);return A};JSSlider.prototype._ensureMarkerLeftInRange=function(A){var C=this._getMinimumMarkerHorizontalLeft();if(A<C){return C}var B=this._getMaximumMarkerHorizontalLeft();if(A>B){return B}return A};JSSlider.prototype._ensureMarkerTopInRange=function(A){var B=this._getMinimumMarkerVerticalTop();if(A<B){return B}var C=this._getMaximumMarkerVerticalTop();if(A>C){return C}return A};JSSlider.prototype._getMarkerLeft=function(E){if(this._horizontalLayout){var C=this._widgetMargin+this._trackImageDimension;var B=this._widgetWidth-C;var D=B-C;var A=C+D*E/100-Math.floor(0.5*this._horizontalMarkerWidth);return A}else{var F=0;if((this._numTicks>0)||(this._customImage!=null)){F=this._ticksThickness+this._ticksMargin}var G;if(this._ticksBeforeTrack){G=this._widgetMargin+F+0.5*this._trackImageDimension}else{G=this._widgetMargin+0.5*this._trackImageDimension}return G-Math.floor(0.5*this._verticalMarkerWidth)}};JSSlider.prototype._getMarkerTop=function(E){if(this._horizontalLayout){var F=0;if((this._numTicks>0)||(this._customImage!=null)){F=this._ticksThickness+this._ticksMargin}var G;if(this._ticksBeforeTrack){G=this._widgetMargin+F+0.5*this._trackImageDimension}else{G=this._widgetMargin+0.5*this._trackImageDimension}return G-Math.floor(0.5*this._horizontalMarkerHeight)}else{var C=this._widgetMargin+this._trackImageDimension;var B=this._widgetHeight-C;var D=B-C;var A=C+D*(100-E)/100-Math.floor(0.5*this._verticalMarkerHeight);return A}};JSSlider.prototype._getRangeBarStartAndSize=function(){var H,E;if(this._horizontalLayout){var F=this._widgetWidth-2*this._widgetMargin;var D=this._trackImageDimension;var C=F-this._trackImageDimension;var G=C-D;H=D+G*this._startPercent/100;var B=D+G*this._endPercent/100;E=B-H}else{var A=this._widgetHeight-2*this._widgetMargin;var D=this._trackImageDimension;var C=A-this._trackImageDimension;var G=C-D;var B=D+G-G*this._startPercent/100;H=D+G-G*this._endPercent/100;E=B-H}return{start:H,size:E}};JSSlider.prototype._appendTickMarks=function(H){var L=this._numTicks;if(L>0||(this._customImage!=null)){var A,E,D,K,I,F,B;if(this._horizontalLayout){if(this._ticksBeforeTrack){E=this._widgetMargin}else{E=this._widgetMargin+this._trackImageDimension+this._ticksMargin}D=this._widgetMargin+this._trackImageDimension;A=this._widgetWidth-2*this._widgetMargin-2*this._trackImageDimension;K=A;I=this._ticksThickness;if(this._trackHidden){I+=this._ticksMargin+this._trackImageDimension}F=1;B=I}else{E=this._widgetMargin+this._trackImageDimension;if(this._ticksBeforeTrack){D=this._widgetMargin}else{D=this._widgetMargin+this._trackImageDimension+this._ticksMargin}A=this._widgetHeight-2*this._widgetMargin-2*this._trackImageDimension;K=this._ticksThickness;if(this._trackHidden){K+=this._ticksMargin+this._trackImageDimension}I=A;F=K;B=1}if(L>1){if(A<L){L=A}}if(this._customImage!=null){H.append('<img style="position: absolute; top: ');H.append(E);H.append("px; left: ");H.append(D);H.append("px; width: ");H.append(K);H.append("px; height: ");H.append(I);H.append('px;" src="');H.append(this._customImage);H.append('"/>')}H.append('<div style="position: absolute; top: ');H.append(E);H.append("px; left: ");H.append(D);H.append("px; width: ");H.append(K);H.append("px; height: ");H.append(I);H.append('px;">');for(var J=0;J<L;J++){H.append('<div style="position: absolute; top: ');if(this._horizontalLayout){H.append("0px; left: ");var G=A*J/(L-1);H.append(G)}else{var C;if(J==0&&L==1){C=A}else{C=A*J/(L-1)}H.append(C);H.append("px; left: 0")}H.append("px; width: ");H.append(F);H.append("px; height: ");H.append(B);H.append("px; background-color: ");H.append(this._tickColor);H.append(';"><img src="');H.append(this._spacerImage);H.append('" style="width: 0px; height: 0px;"/></div>')}H.append("</div>")}};JSSlider.prototype._appendTrackOutline=function(B){var Q,F,S,R,U,N,J,V,G,D,A,K,L,H,I,O,P,W,C,M;var E=0;if((this._numTicks>0)||(this._customImage!=null)){E=this._ticksThickness+this._ticksMargin}if(this._horizontalLayout){if(this._ticksBeforeTrack){Q=this._widgetMargin+E}else{Q=this._widgetMargin}F=this._widgetMargin;S=this._widgetWidth-2*this._widgetMargin;R=this._trackImageDimension;I=0;O=0;P=this._horizontalTrackStartImage;U=0;N=this._trackImageDimension;J=S-2*this._trackImageDimension;V=this._trackImageDimension;G=this._horizontalTrackMidImage;W=0;C=S-this._trackImageDimension;M=this._horizontalTrackEndImage;if(this._rangeSlider){var T=this._getRangeBarStartAndSize();D=0;A=T.start;K=T.size;L=this._trackImageDimension;H=this._horizontalTrackRangeImage}}else{Q=this._widgetMargin;if(this._ticksBeforeTrack){F=this._widgetMargin+E}else{F=this._widgetMargin}S=this._trackImageDimension;R=this._widgetHeight-2*this._widgetMargin;I=R-this._trackImageDimension;O=0;P=this._verticalTrackStartImage;U=this._trackImageDimension;N=0;J=this._trackImageDimension;V=R-2*this._trackImageDimension;G=this._verticalTrackMidImage;W=0;C=0;M=this._verticalTrackEndImage;if(this._rangeSlider){var T=this._getRangeBarStartAndSize();D=T.start;A=0;K=this._trackImageDimension;L=T.size;H=this._verticalTrackRangeImage}}B.append('<div style="position: absolute; top: ');B.append(Q);B.append("px; left: ");B.append(F);B.append("px; width: ");B.append(S);B.append("px; height: ");B.append(R);B.append('px;">');B.append('<img style="position: absolute; top: ');B.append(I);B.append("px; left: ");B.append(O);B.append("px; width: ");B.append(this._trackImageDimension);B.append("px; height: ");B.append(this._trackImageDimension);B.append('px;" src="');B.append(P);B.append('"/>');B.append('<img style="position: absolute; top: ');B.append(U);B.append("px; left: ");B.append(N);B.append("px; width: ");B.append(J);B.append("px; height: ");B.append(V);B.append("px; background-image: url('");B.append(G);B.append('\');" src="');B.append(this._spacerImage);B.append('"/>');B.append('<img style="position: absolute; top: ');B.append(W);B.append("px; left: ");B.append(C);B.append("px; width: ");B.append(this._trackImageDimension);B.append("px; height: ");B.append(this._trackImageDimension);B.append('px;" src="');B.append(M);B.append('"/>');if(this._rangeSlider){B.append('<img id="');B.append(this._id);B.append(JSSlider._ID_RANGE_BAR);B.append('" style="position: absolute; top: ');B.append(D);B.append("px; left: ");B.append(A);B.append("px; width: ");B.append(K);B.append("px; height: ");B.append(L);B.append("px; background-image: url('");B.append(H);B.append('\');" src="');B.append(this._spacerImage);B.append('"/>')}B.append("</div>")};JSSlider.prototype._appendMarker=function(F,A,E){var B,I,D,H;if(this._horizontalLayout){B=this._horizontalMarkerWidth;I=this._horizontalMarkerHeight;D=this._horizontalMarkerImage;H="pointer"}else{B=this._verticalMarkerWidth;I=this._verticalMarkerHeight;D=this._verticalMarkerImage;H="pointer"}var G=this._getMarkerTop(A);var C=this._getMarkerLeft(A);F.append('<a id="');F.append(E);F.append('" href="javascript:;" style="position: absolute; top: ');F.append(G);F.append("px; left: ");F.append(C);F.append("px; cursor: ");F.append(H);F.append(';"
 onkeydown="return window[\'');F.append(this._id);F.append("'].markerKeyDown(this,event)\" onmousedown=\"window['");F.append(this._id);F.append("'].markerDragged(this,event)\" onmousemove=\"if(document.all){window['");F.append(this._id);F.append("'].markerMoved(event);}\" onmouseup=\"if(document.all){window['");F.append(this._id);F.append('\'].markerReleased(event)}"><img align="top" border=0 src="');F.append(D);F.append('" style="width: ');F.append(B);F.append("px; height: ");F.append(I);F.append('px;"/></a>')};function DhtmlStringBuffer(){this.maxStreamLength=(document.all?100:10000);this.data=new Array(100);this.iStr=0;this.append=function(A){this.data[this.iStr++]=A;if(this.data.length>this.maxStreamLength){this.data=[this.data.join("")];this.data.length=100;this.iStr=1}return this};this.toString=function(){return this.data.join("")}}DhtmlStringBuffer._joinFunc=Array.prototype.join;DhtmlStringBuffer.concat=function(){arguments.join=this._joinFunc;return arguments.join("")};function reposRangeBarHChanged(A,B){reposRangeSliderV.setMarkerPercent(A,B)}function reposRangeBarVChanged(A,B){reposRangeSliderH.setMarkerPercent(A,B)}function DefaultValChangedListener(A,B,C,D){var E=Math.round(100*B)/100;document.getElementById("slideval").value=E}JSSlider._ID_WIDGET="sliderWidget";JSSlider._ID_RANGE_BAR="sliderRangeBar";JSSlider._ID_START_MARKER="sliderStartMarker";JSSlider._ID_END_MARKER="sliderEndMarker";JSSlider._KEY_CODE_ARROW_RIGHT=39;JSSlider._KEY_CODE_ARROW_LEFT=37;JSSlider._KEY_CODE_ARROW_UP=38;JSSlider._KEY_CODE_ARROW_DOWN=40;

		
	
		
		
		

		
		
		

		

		

		
			
		
	
	
		
		
			
		
	
		
		
		

		
		
		

		

		

		
			
		
	
		
		
	
			
			
	
		
		
		
		
		
		
		
		

		
		
		

		

		

		
			
		
	
		
		
		
		
		
		
		
	
	
	
		


	
